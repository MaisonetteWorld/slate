---
title: Maisonette backend API documentation
language_tabs:
  - json: JSON
  - shell: cURL
---


# Address

As a guest user

## Updating Address


### Request

#### Endpoint

```plaintext
PUT /api/orders/M574747319/addresses/37
Accept: application/json
X-Spree-Order-Token: SRXJRoZ-rxdP5A2ucUT5uQ
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/orders/:order_id/addresses/:id`

#### Parameters


```json
address[firstname]=John+the+Tester
```


| Name | Description |
|:-----|:------------|
| order_id *required* | Order number |
| id *required* | Ship or Bill Address id |
| address[firstname]  | Address firstname |
| address[lastname]  | Address lastname |
| address[first_tname]  | Address first tname |
| address[last_name]  | Address last name |
| address[address1]  | Address address1 |
| address[address2]  | Address address2 |
| address[city]  | Address city |
| address[country_id]  | Address country |
| address[state_id]  | Address state |
| address[zipcode]  | Address zipcode |
| address[phone]  | Address phone |
| address[state_name]  | Address state name |
| address[country_iso]  | Address country iso |
| address[alternative_phone]  | Address alternative phone |
| address[company]  | Address company |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bd2e941cc2276c9c9f1ea38e17aa1605&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: e0783b09-e648-480c-904f-17b4128f58d0
X-Runtime: 0.053764
Vary: Origin
Content-Length: 516
200 OK
```


```json
{
  "id": 38,
  "firstname": "John the Tester",
  "lastname": "Smith",
  "full_name": "John the Tester Smith",
  "address1": "A Different Road",
  "address2": "Northwest",
  "city": "Herndon",
  "zipcode": "10037",
  "phone": "555-555-0199",
  "company": "Company",
  "alternative_phone": "555-555-0199",
  "country_id": 41,
  "country_iso": "US",
  "state_id": 41,
  "state_name": null,
  "state_text": "AL",
  "country": {
    "id": 41,
    "iso_name": "UNITED STATES",
    "iso": "US",
    "iso3": "USA",
    "name": "United States",
    "numcode": 840
  },
  "state": {
    "id": 41,
    "name": "Alabama",
    "abbr": "AL",
    "country_id": 41
  }
}
```



# Braintree transactions

Please do not send billing address attributes at all if there is no billing address, otherwise you will get an order error


## Creating a PayPal express checkout transaction


### Request

#### Endpoint

```plaintext
POST /api/braintree/transactions
Accept: application/json
X-Spree-Order-Token: oujwvBeneFhQ1oFFCCAi3w
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/braintree/transactions`

#### Parameters


```json
order_id=M654223393&payment_method_id=26&transaction[email]=maryellen.oga%40mckenziemcglynn.com&transaction[nonce]=fake-paypal-billing-agreement-nonce&transaction[phone]=555-555-0199&transaction[shipping_address_attributes][first_name]=John&transaction[shipping_address_attributes][last_name]=Stamm&transaction[shipping_address_attributes][address_line_1]=A+Different+Road&transaction[shipping_address_attributes][city]=Herndon&transaction[shipping_address_attributes][state_code]=AL&transaction[shipping_address_attributes][zip]=10073&transaction[shipping_address_attributes][country_code]=US&transaction[payment_type]=PayPalAccount&transaction[billing_address_attributes][first_name]=John&transaction[billing_address_attributes][last_name]=Stamm&transaction[billing_address_attributes][address_line_1]=A+Different+Road&transaction[billing_address_attributes][city]=Herndon&transaction[billing_address_attributes][state_code]=AL&transaction[billing_address_attributes][zip]=10073&transaction[billing_address_attributes][country_code]=US
```


| Name | Description |
|:-----|:------------|
| order_id *required* | The order number |
| payment_method_id *required* | The payment method id |
| transaction[device_data] *required* | The device_data |
| transaction[email] *required* | The transaction user email |
| transaction[nonce] *required* | The transaction nonce |
| transaction[phone] *required* | The transaction user phone number |
| transaction[shipping_address_attributes][first_name] *required* | The transaction shipping address first name |
| transaction[shipping_address_attributes][last_name] *required* | The transaction shipping address last name |
| transaction[shipping_address_attributes][address_line_1] *required* | The transaction shipping address line 1 |
| transaction[shipping_address_attributes][city] *required* | The transaction shipping address city |
| transaction[shipping_address_attributes][state_code] *required* | The transaction shipping address state code |
| transaction[shipping_address_attributes][zip] *required* | The transaction shipping address zip code |
| transaction[shipping_address_attributes][country_code] *required* | The transaction shipping address country code |
| transaction[payment_type] *required* | The payment type. Must be `PayPalAccount` |
| transaction[billing_address_attributes][first_name]  | The transaction billing address first name |
| transaction[billing_address_attributes][last_name]  | The transaction billing address last name |
| transaction[billing_address_attributes][address_line_1]  | The transaction billing address line 1 |
| transaction[billing_address_attributes][city]  | The transaction billing address city |
| transaction[billing_address_attributes][state_code]  | The transaction billing address state code |
| transaction[billing_address_attributes][zip]  | The transaction billing address zip code |
| transaction[billing_address_attributes][country_code]  | The transaction billing address country code |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;aef5e083a08ca2f4e51d98009ce3d014&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 1d7ed3b2-dfc4-4fdb-b855-0e19a98c1736
X-Runtime: 0.548679
Vary: Origin
Content-Length: 5281
200 OK
```


```json
{
  "id": 41,
  "number": "M654223393",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": null,
  "created_at": "2021-06-21T15:45:12.795-04:00",
  "updated_at": "2021-06-21T15:45:13.314-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "maryellen.oga@mckenziemcglynn.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "oujwvBeneFhQ1oFFCCAi3w",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M654223393&bzip=10073&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 26,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 78,
    "firstname": "John",
    "lastname": "Stamm",
    "full_name": "John Stamm",
    "address1": "A Different Road",
    "address2": null,
    "city": "Herndon",
    "zipcode": "10073",
    "phone": "555-555-0199",
    "company": null,
    "alternative_phone": null,
    "country_id": 59,
    "country_iso": "US",
    "state_id": 59,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 59,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 59,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 59
    }
  },
  "ship_address": {
    "id": 79,
    "firstname": "John",
    "lastname": "Stamm",
    "full_name": "John Stamm",
    "address1": "A Different Road",
    "address2": null,
    "city": "Herndon",
    "zipcode": "10073",
    "phone": "555-555-0199",
    "company": null,
    "alternative_phone": null,
    "country_id": 59,
    "country_iso": "US",
    "state_id": 59,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 59,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 59,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 59
    }
  },
  "line_items": [
    {
      "id": 39,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 189,
      "vendor_id": 356,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 189,
        "name": "Product #102 - 9233",
        "sku": "SKU-188",
        "is_master": false,
        "slug": "product-102-9233",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 87,
            "name": "Size-87",
            "presentation": "S",
            "option_type_name": "foo-size-87",
            "option_type_id": 87,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 102,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #357",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [
    {
      "id": 9,
      "source_type": "SolidusPaypalBraintree::Source",
      "source_id": 10,
      "amount": "110.0",
      "display_amount": "$110.00",
      "payment_method_id": 26,
      "state": "checkout",
      "avs_response": null,
      "created_at": "2021-06-21T15:45:12.966-04:00",
      "updated_at": "2021-06-21T15:45:12.966-04:00",
      "payment_method": {
        "id": 26,
        "name": "Braintree"
      },
      "source": {
        "id": 10,
        "payment_type": "PayPalAccount",
        "token": "bgx899",
        "created_at": "2021-06-21T15:45:12.965-04:00",
        "email": "jane.doe@paypal.com"
      }
    }
  ],
  "shipments": [
    {
      "id": 39,
      "tracking": null,
      "tracking_url": null,
      "number": "H11244428724",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M654223393",
      "stock_location_name": "NY Warehouse 69",
      "giftwrappable": false,
      "stock_location_id": 69,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 36,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 27,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 36,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 27,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 27,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 30,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 57,
              "name": "ShippingCategory #55"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 189,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 69, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Creating an ApplePay one-click checkout transaction


### Request

#### Endpoint

```plaintext
POST /api/braintree/transactions
Accept: application/json
X-Spree-Order-Token: -CBwI2FW31onBpf3Xpc-Ag
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/braintree/transactions`

#### Parameters


```json
order_id=M816712783&payment_method_id=25&transaction[email]=maryellen.oga%40mckenziemcglynn.com&transaction[nonce]=fake-apple-pay-visa-nonce&transaction[phone]=555-555-0199&transaction[shipping_address_attributes][first_name]=John&transaction[shipping_address_attributes][last_name]=Stamm&transaction[shipping_address_attributes][address_line_1]=A+Different+Road&transaction[shipping_address_attributes][city]=Herndon&transaction[shipping_address_attributes][state_code]=AL&transaction[shipping_address_attributes][zip]=10071&transaction[shipping_address_attributes][country_code]=US&transaction[payment_type]=ApplePayCard
```


| Name | Description |
|:-----|:------------|
| order_id *required* | The order number |
| payment_method_id *required* | The payment method id |
| transaction[device_data] *required* | The device_data |
| transaction[email] *required* | The transaction user email |
| transaction[nonce] *required* | The transaction nonce |
| transaction[phone] *required* | The transaction user phone number |
| transaction[shipping_address_attributes][first_name] *required* | The transaction shipping address first name |
| transaction[shipping_address_attributes][last_name] *required* | The transaction shipping address last name |
| transaction[shipping_address_attributes][address_line_1] *required* | The transaction shipping address line 1 |
| transaction[shipping_address_attributes][city] *required* | The transaction shipping address city |
| transaction[shipping_address_attributes][state_code] *required* | The transaction shipping address state code |
| transaction[shipping_address_attributes][zip] *required* | The transaction shipping address zip code |
| transaction[shipping_address_attributes][country_code] *required* | The transaction shipping address country code |
| transaction[payment_type] *required* | The payment type. Must be `ApplePayCard` |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;ed0b362cf721742f2d028106bbe1795b&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: afe3d68e-e024-4baa-b7e0-7857d8762fc6
X-Runtime: 0.499596
Vary: Origin
Content-Length: 5325
200 OK
```


```json
{
  "id": 40,
  "number": "M816712783",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": null,
  "created_at": "2021-06-21T15:45:11.855-04:00",
  "updated_at": "2021-06-21T15:45:12.291-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "maryellen.oga@mckenziemcglynn.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "-CBwI2FW31onBpf3Xpc-Ag",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M816712783&bzip=10071&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 25,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 74,
    "firstname": "John",
    "lastname": "Stamm",
    "full_name": "John Stamm",
    "address1": "A Different Road",
    "address2": null,
    "city": "Herndon",
    "zipcode": "10071",
    "phone": "555-555-0199",
    "company": null,
    "alternative_phone": null,
    "country_id": 58,
    "country_iso": "US",
    "state_id": 58,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 58,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 58,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 58
    }
  },
  "ship_address": {
    "id": 75,
    "firstname": "John",
    "lastname": "Stamm",
    "full_name": "John Stamm",
    "address1": "A Different Road",
    "address2": null,
    "city": "Herndon",
    "zipcode": "10071",
    "phone": "555-555-0199",
    "company": null,
    "alternative_phone": null,
    "country_id": 58,
    "country_iso": "US",
    "state_id": 58,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 58,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 58,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 58
    }
  },
  "line_items": [
    {
      "id": 38,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 187,
      "vendor_id": 351,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 187,
        "name": "Product #101 - 7766",
        "sku": "SKU-186",
        "is_master": false,
        "slug": "product-101-7766",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 86,
            "name": "Size-86",
            "presentation": "S",
            "option_type_name": "foo-size-86",
            "option_type_id": 86,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 101,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #352",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [
    {
      "id": 8,
      "source_type": "SolidusPaypalBraintree::Source",
      "source_id": 9,
      "amount": "110.0",
      "display_amount": "$110.00",
      "payment_method_id": 25,
      "state": "checkout",
      "avs_response": null,
      "created_at": "2021-06-21T15:45:12.001-04:00",
      "updated_at": "2021-06-21T15:45:12.001-04:00",
      "payment_method": {
        "id": 25,
        "name": "Braintree"
      },
      "source": {
        "id": 9,
        "payment_type": "ApplePayCard",
        "token": "cg7hsk",
        "created_at": "2021-06-21T15:45:12.000-04:00",
        "cc_type": "Apple Pay - Visa",
        "last_digits": "1881",
        "month": "12",
        "year": "2020"
      }
    }
  ],
  "shipments": [
    {
      "id": 37,
      "tracking": null,
      "tracking_url": null,
      "number": "H03583041054",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M816712783",
      "stock_location_name": "NY Warehouse 68",
      "giftwrappable": false,
      "stock_location_id": 68,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 34,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 26,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 34,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 26,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 26,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 29,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 56,
              "name": "ShippingCategory #54"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 187,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 68, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



# Checkout



## Completing the checkout when the order includes a Braintree payment


### Request

#### Endpoint

```plaintext
PUT /api/checkouts/M041897431/complete
Accept: application/json
X-Spree-Order-Token: bvfDA7EU06q0hN_HT7BmkA
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/checkouts/:id/complete`

#### Parameters


```json
expected_total=110.0&braintree_device_data=fake+device+data
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| expected_total  | The amount the customer expects to pay |
| braintree_device_data  | The device_data generated by Braintree for Advanced Fraud Tools check |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bd33a432f65937b14f68199bf4a38f12&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 03d22fff-cbef-47fe-80c0-80d4693a9889
X-Runtime: 0.493608
Vary: Origin
Content-Length: 5411
200 OK
```


```json
{
  "id": 18,
  "number": "M041897431",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "complete",
  "adjustment_total": "0.0",
  "user_id": 58,
  "created_at": "2021-06-21T15:44:57.813-04:00",
  "updated_at": "2021-06-21T15:44:58.281-04:00",
  "completed_at": "2021-06-21T15:44:58.281-04:00",
  "payment_total": "110.0",
  "shipment_state": "ready",
  "payment_state": "paid",
  "email": "email58@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": true,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "bvfDA7EU06q0hN_HT7BmkA",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M041897431&bzip=10025&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 7,
      "name": "Braintree"
    },
    {
      "id": 8,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 25,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10025",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 37,
    "country_iso": "US",
    "state_id": 37,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 37,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 37,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 37
    }
  },
  "ship_address": {
    "id": 26,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10026",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 37,
    "country_iso": "US",
    "state_id": 37,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 37,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 37,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 37
    }
  },
  "line_items": [
    {
      "id": 20,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 127,
      "vendor_id": 232,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "breadcrumb_taxons": [

      ],
      "variant": {
        "id": 127,
        "name": "Product #70 - 7894",
        "sku": "SKU-126",
        "is_master": false,
        "slug": "product-70-7894",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 9,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 57,
            "name": "Size-57",
            "presentation": "S",
            "option_type_name": "foo-size-57",
            "option_type_id": 57,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 70,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #232",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [
    {
      "id": 2,
      "source_type": "SolidusPaypalBraintree::Source",
      "source_id": 2,
      "amount": "110.0",
      "display_amount": "$110.00",
      "payment_method_id": 7,
      "state": "completed",
      "avs_response": "M",
      "created_at": "2021-06-21T15:44:57.929-04:00",
      "updated_at": "2021-06-21T15:44:58.068-04:00",
      "payment_method": {
        "id": 7,
        "name": "Braintree"
      },
      "source": {
        "id": 2,
        "payment_type": "CreditCard",
        "token": "4rptfz",
        "created_at": "2021-06-21T15:44:57.928-04:00",
        "cc_type": "Visa",
        "last_digits": "1881",
        "month": "12",
        "year": "2020"
      }
    }
  ],
  "shipments": [
    {
      "id": 19,
      "tracking": "U10000",
      "tracking_url": null,
      "number": "H54462704405",
      "cost": "100.0",
      "shipped_at": null,
      "state": "ready",
      "order_id": "M041897431",
      "stock_location_name": "NY Warehouse 43",
      "giftwrappable": false,
      "stock_location_id": 43,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 17,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 9,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 17,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 9,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 9,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 13,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 37,
              "name": "ShippingCategory #36"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 127,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 43, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Processing the checkout payment step with a not yet existing ApplePay payment


### Request

#### Endpoint

```plaintext
PATCH /api/checkouts/M686863042
Accept: application/json
X-Spree-Order-Token: kjoW13BJdsbvn-No9JmGHg
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/checkouts/:id`

#### Parameters


```json
order[payment_attributes][source_attributes][device_data]=fake+device+data
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| order[payment_attributes] *required* | The payment attibutes |
| order[payment_attributes][payment_method_id] *required* | The payment method id |
| order[payment_attributes][source_attributes][nonce] *required* | The payment nonce |
| order[payment_attributes][source_attributes][device_data]  | The Braintree device data |
| order[payment_attributes][source_attributes][payment_type] *required* | The payment type. Must be `ApplePayCard` |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;842947c9325c50dc3ce9491fb31abae3&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: a7437011-13d7-4d3c-bdba-fdb249597e49
X-Runtime: 0.169915
Vary: Origin
Content-Length: 4843
200 OK
```


```json
{
  "id": 15,
  "number": "M686863042",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": 55,
  "created_at": "2021-06-21T15:44:54.929-04:00",
  "updated_at": "2021-06-21T15:44:55.331-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email55@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "kjoW13BJdsbvn-No9JmGHg",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M686863042&bzip=10019&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 4,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 19,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10019",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 34,
    "country_iso": "US",
    "state_id": 34,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 34,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 34,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 34
    }
  },
  "ship_address": {
    "id": 20,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10020",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 34,
    "country_iso": "US",
    "state_id": 34,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 34,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 34,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 34
    }
  },
  "line_items": [
    {
      "id": 17,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 121,
      "vendor_id": 217,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 121,
        "name": "Product #67 - 5671",
        "sku": "SKU-120",
        "is_master": false,
        "slug": "product-67-5671",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 54,
            "name": "Size-54",
            "presentation": "S",
            "option_type_name": "foo-size-54",
            "option_type_id": 54,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 67,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #217",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 14,
      "tracking": null,
      "tracking_url": null,
      "number": "H24550541288",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M686863042",
      "stock_location_name": "NY Warehouse 40",
      "giftwrappable": false,
      "stock_location_id": 40,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 12,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 6,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 12,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 6,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 6,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 10,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 34,
              "name": "ShippingCategory #33"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 121,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 40, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Processing the checkout payment step with a not yet existing PayPal payment


### Request

#### Endpoint

```plaintext
PATCH /api/checkouts/M017231422
Accept: application/json
X-Spree-Order-Token: 2WmzkmzCLJwrgr8s7rmu_Q
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/checkouts/:id`

#### Parameters


```json
order[payment_attributes][source_attributes][device_data]=fake+device+data
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| order[payment_attributes] *required* | The payment attibutes |
| order[payment_attributes][payment_method_id] *required* | The payment method id |
| order[payment_attributes][source_attributes][nonce] *required* | The payment nonce |
| order[payment_attributes][source_attributes][device_data]  | The Braintree device data |
| order[payment_attributes][source_attributes][payment_type] *required* | The payment type. Must be `PayPalAccount` |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;d3127e0419e770d4825d3a285254fc28&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 821f7c0b-1c96-49f0-9a08-6e2bd88eab64
X-Runtime: 0.158891
Vary: Origin
Content-Length: 4843
200 OK
```


```json
{
  "id": 17,
  "number": "M017231422",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": 57,
  "created_at": "2021-06-21T15:44:56.834-04:00",
  "updated_at": "2021-06-21T15:44:57.354-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email57@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "2WmzkmzCLJwrgr8s7rmu_Q",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M017231422&bzip=10023&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 6,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 23,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10023",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 36,
    "country_iso": "US",
    "state_id": 36,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 36,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 36,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 36
    }
  },
  "ship_address": {
    "id": 24,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10024",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 36,
    "country_iso": "US",
    "state_id": 36,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 36,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 36,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 36
    }
  },
  "line_items": [
    {
      "id": 19,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 125,
      "vendor_id": 227,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 125,
        "name": "Product #69 - 9975",
        "sku": "SKU-124",
        "is_master": false,
        "slug": "product-69-9975",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 56,
            "name": "Size-56",
            "presentation": "S",
            "option_type_name": "foo-size-56",
            "option_type_id": 56,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 69,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #227",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 18,
      "tracking": null,
      "tracking_url": null,
      "number": "H15143326736",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M017231422",
      "stock_location_name": "NY Warehouse 42",
      "giftwrappable": false,
      "stock_location_id": 42,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 16,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 8,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 16,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 8,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 8,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 12,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 36,
              "name": "ShippingCategory #35"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 125,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 42, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Processing the checkout payment step with a not yet existing credit card payment


### Request

#### Endpoint

```plaintext
PATCH /api/checkouts/M918511027
Accept: application/json
X-Spree-Order-Token: ZMY_1G_HECAaefID0CuNlw
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/checkouts/:id`

#### Parameters


```json
order[payment_attributes][source_attributes][device_data]=fake+device+data
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| order[payment_attributes] *required* | The payment attibutes |
| order[payment_attributes][payment_method_id] *required* | The payment method id |
| order[payment_attributes][source_attributes][nonce] *required* | The payment nonce |
| order[payment_attributes][source_attributes][device_data]  | The Braintree device data |
| order[payment_attributes][source_attributes][payment_type] *required* | The payment type. Must be `CreditCard` |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;b028874e5c14c0a7752f5f1f0c811382&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 03a2929c-6fa7-4a0c-bd40-2b1d10db9eb3
X-Runtime: 0.200620
Vary: Origin
Content-Length: 4843
200 OK
```


```json
{
  "id": 16,
  "number": "M918511027",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": 56,
  "created_at": "2021-06-21T15:44:55.825-04:00",
  "updated_at": "2021-06-21T15:44:56.253-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email56@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "ZMY_1G_HECAaefID0CuNlw",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M918511027&bzip=10021&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 5,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 21,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10021",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 35,
    "country_iso": "US",
    "state_id": 35,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 35,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 35,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 35
    }
  },
  "ship_address": {
    "id": 22,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10022",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 35,
    "country_iso": "US",
    "state_id": 35,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 35,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 35,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 35
    }
  },
  "line_items": [
    {
      "id": 18,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 123,
      "vendor_id": 222,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 123,
        "name": "Product #68 - 2703",
        "sku": "SKU-122",
        "is_master": false,
        "slug": "product-68-2703",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 55,
            "name": "Size-55",
            "presentation": "S",
            "option_type_name": "foo-size-55",
            "option_type_id": 55,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 68,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #222",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 16,
      "tracking": null,
      "tracking_url": null,
      "number": "H31225258383",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M918511027",
      "stock_location_name": "NY Warehouse 41",
      "giftwrappable": false,
      "stock_location_id": 41,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 14,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 7,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 14,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 7,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 7,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 11,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 35,
              "name": "ShippingCategory #34"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 123,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 41, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Processing the checkout payment step with an already existing payment


### Request

#### Endpoint

```plaintext
PATCH /api/checkouts/M550116985
Accept: application/json
X-Spree-Order-Token: cfOQKD_HyeB7X5x9SffeOw
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/checkouts/:id`

#### Parameters


```json
order[payment_attributes][source_attributes][device_data]=fake+device+data
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| order[payment_attributes] *required* | The payment attibutes |
| order[payment_attributes][payment_method_id] *required* | The payment method id |
| order[payment_attributes][source_attributes][wallet_payment_source_id] *required* | The payment source id of a payment within the user’s payments wallet |
| order[payment_attributes][source_attributes][device_data]  | The Braintree device data |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;a602fafba238f2578e580ba8b145f9f1&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: fae3e7c7-8709-4448-a2f1-f7b2b428ad75
X-Runtime: 0.242654
Vary: Origin
Content-Length: 4840
200 OK
```


```json
{
  "id": 14,
  "number": "M550116985",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "confirm",
  "adjustment_total": "0.0",
  "user_id": 54,
  "created_at": "2021-06-21T15:44:53.930-04:00",
  "updated_at": "2021-06-21T15:44:54.476-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email54@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": "0.0",
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "cfOQKD_HyeB7X5x9SffeOw",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M550116985&bzip=10017&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [
    {
      "id": 3,
      "name": "Braintree"
    }
  ],
  "bill_address": {
    "id": 17,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10017",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 33,
    "country_iso": "US",
    "state_id": 33,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 33,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 33,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 33
    }
  },
  "ship_address": {
    "id": 18,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10018",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 33,
    "country_iso": "US",
    "state_id": 33,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 33,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 33,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 33
    }
  },
  "line_items": [
    {
      "id": 16,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 119,
      "vendor_id": 212,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 119,
        "name": "Product #66 - 641",
        "sku": "SKU-118",
        "is_master": false,
        "slug": "product-66-641",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 53,
            "name": "Size-53",
            "presentation": "S",
            "option_type_name": "foo-size-53",
            "option_type_id": 53,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 66,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #212",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 12,
      "tracking": null,
      "tracking_url": null,
      "number": "H30158612175",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M550116985",
      "stock_location_name": "NY Warehouse 39",
      "giftwrappable": false,
      "stock_location_id": 39,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 10,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 5,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 10,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 5,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 5,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 9,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 33,
              "name": "ShippingCategory #32"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 119,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 39, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## update address


### Request

#### Endpoint

```plaintext
PUT /api/checkouts/M881398671
Accept: application/json
X-Spree-Order-Token: oFtZeCDwnCMn8ZKtjvKVMA
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/checkouts/:id`

#### Parameters


```json
order[ship_address_attributes][id]&order[ship_address_attributes][firstname]=John&order[ship_address_attributes][lastname]=Smith&order[ship_address_attributes][address1]=10+Lovely+Street&order[ship_address_attributes][address2]=Northwest&order[ship_address_attributes][city]=Herndon&order[ship_address_attributes][zipcode]=10027&order[ship_address_attributes][phone]=555-555-0199&order[ship_address_attributes][state_name]&order[ship_address_attributes][alternative_phone]=555-555-0199&order[ship_address_attributes][company]=Company&order[ship_address_attributes][state_id]=38&order[ship_address_attributes][country_id]=38&order[ship_address_attributes][created_at]&order[ship_address_attributes][updated_at]&order[ship_address_attributes][easypost_address_id]&order[use_billing]=true&hold_state=true
```


| Name | Description |
|:-----|:------------|
| id *required* | The order number |
| order[ship_address_attributes] *required* | Order ship address attributes |
| order[bill_address_attributes]  | Order bill address attributes |
| order[use_billing]  | when `true` set billing address equal to shipping |
| hold_state  | skip state transiction |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;f1b640243118e612e86dcbf18bb48a20&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 741085b6-04b5-4f27-a3d1-e35bb6d0834c
X-Runtime: 0.167080
Vary: Origin
Content-Length: 4821
200 OK
```


```json
{
  "id": 19,
  "number": "M881398671",
  "item_total": "10.0",
  "total": "110.0",
  "ship_total": "100.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": 59,
  "created_at": "2021-06-21T15:44:58.844-04:00",
  "updated_at": "2021-06-21T15:44:58.987-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email59@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "110.0",
  "display_order_total_after_store_credit": "$110.00",
  "total_applicable_store_credit": 0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$10.00",
  "total_quantity": 1,
  "display_total": "$110.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "oFtZeCDwnCMn8ZKtjvKVMA",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M881398671&bzip=10027&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": {
    "id": 27,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "10 Lovely Street",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10027",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 38,
    "country_iso": "US",
    "state_id": 38,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 38,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 38,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 38
    }
  },
  "ship_address": {
    "id": 27,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "10 Lovely Street",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10027",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 38,
    "country_iso": "US",
    "state_id": 38,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 38,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 38,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 38
    }
  },
  "line_items": [
    {
      "id": 21,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 129,
      "vendor_id": 237,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "10.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 129,
        "name": "Product #71 - 9813",
        "sku": "SKU-128",
        "is_master": false,
        "slug": "product-71-9813",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 58,
            "name": "Size-58",
            "presentation": "S",
            "option_type_name": "foo-size-58",
            "option_type_id": 58,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 71,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #237",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 20,
      "tracking": "U10000",
      "tracking_url": null,
      "number": "H48664788838",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M881398671",
      "stock_location_name": "NY Warehouse 44",
      "giftwrappable": false,
      "stock_location_id": 44,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 18,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 10,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 18,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 10,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 10,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 14,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 38,
              "name": "ShippingCategory #37"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 129,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [

      ],
      "stock_location_address": "NY Warehouse 44, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



# Giftwrap

Create giftwrap related to shipment

## Create Giftwrap


### Request

#### Endpoint

```plaintext
POST /api/shipments/H70703333540/giftwrap
Accept: application/json
X-Spree-Order-Token: 7XEDA2Phdyni0bA1R_YrwA
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/shipments/:shipment_number/giftwrap`

#### Parameters


```json
order_number=M700842434
```


| Name | Description |
|:-----|:------------|
| order_number *required* |  order number |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;8899de3b4666d0585858e447929a27f9&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 86e0da2f-7776-43c5-b9fd-97b3e4194131
X-Runtime: 0.078406
Vary: Origin
Content-Length: 74
201 Created
```


```json
{
  "id": 1,
  "giftwrap_cost": 2.5,
  "giftwrap_price": 4.0,
  "giftwrap_money": "$4.00"
}
```



## Delete Giftwrap


### Request

#### Endpoint

```plaintext
DELETE /api/shipments/H10288084730/giftwrap
Accept: application/json
X-Spree-Order-Token: _TroohXqbQ1DJCNXpiJ9GQ
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/shipments/:shipment_number/giftwrap`

#### Parameters


```json
order_number=M789664345
```


| Name | Description |
|:-----|:------------|
| order_number *required* |  order number |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 8220c46d-4bb7-489e-880e-ef0c5f183cfb
X-Runtime: 0.024033
Vary: Origin
204 No Content
```




# LineItem

Representation of a single cart item for a specific variant with price of vendor

## Creating a line item


### Request

#### Endpoint

```plaintext
POST /api/orders/M531900349/line_items
Accept: application/json
Authorizat IO N: Bearer 6fb52d23e198bb22259990d28a78d0e8aa3bf40ff4fd2dc7
X-Spree-Order-Token: RaemjBbd6jbeV4FJYluJng
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/:order_number/line_items`

#### Parameters


```json
line_item[variant_id]=153&line_item[options][vendor_id]=286&line_item[quantity]=1
```


| Name | Description |
|:-----|:------------|
| line_item[variant_id] *required* | Line item variant |
| line_item[options]  | Hash containing the vendor_id. It's used to set the price based on vendor |
| line_item[quantity]  | Line item quantity |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;6bbdf531c2b1a0e243c4ec5d57daa673&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 88f2a394-32c7-4a45-9dc0-4c92f119b8b3
X-Runtime: 0.130212
Vary: Origin
Content-Length: 944
201 Created
```


```json
{
  "id": 30,
  "quantity": 1,
  "price": "19.99",
  "variant_id": 153,
  "vendor_id": 286,
  "single_display_amount": "$19.99",
  "display_amount": "$19.99",
  "total": "19.99",
  "on_sale": false,
  "final_sale": false,
  "backordered": null,
  "promotionable": true,
  "variant": {
    "id": 153,
    "name": "Product #84 - 1819",
    "sku": "SKU-152",
    "is_master": false,
    "slug": "product-84-1819",
    "description": "As seen on TV!",
    "track_inventory": true,
    "cost_price": "17.0",
    "price": "19.99",
    "display_price": "$19.99",
    "options_text": "Size: S",
    "in_stock": false,
    "is_backorderable": true,
    "total_on_hand": 0,
    "is_destroyed": false,
    "option_values": [
      {
        "id": 69,
        "name": "Size-69",
        "presentation": "S",
        "option_type_name": "foo-size-69",
        "option_type_id": 69,
        "option_type_presentation": "Size",
        "position": 1
      }
    ],
    "images": [

    ],
    "videos": [

    ],
    "product_id": 84,
    "lead_time": 2,
    "brand": null,
    "brand_slug": null,
    "brand_description": null
  },
  "monogram": null,
  "gift_cards": [

  ],
  "vendor_name": "Vendor #287",
  "country_iso": null,
  "domestic_override": null,
  "adjustments": [

  ]
}
```



## Creating a line item gift card


### Request

#### Endpoint

```plaintext
POST /api/orders/M114122631/line_items
Accept: application/json
Authorizat IO N: Bearer e3bf0d2122ce5a454394584877199765f0fda60d819ce028
X-Spree-Order-Token: QJPlrrAJP3G8OlZN-iLnMA
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/:order_number/line_items`

#### Parameters


```json
line_item[variant_id]=145&line_item[options][vendor_id]=272&line_item[options][gift_card_details][recipient_name]=Recipient+John&line_item[options][gift_card_details][recipient_email]=recipient%40email.com&line_item[options][gift_card_details][purchaser_name]=Purchaser+Bob&line_item[options][gift_card_details][gift_message]=Surprise&line_item[options][gift_card_details][send_email_at]=2021-06-21+15%3A45%3A03+-0400&line_item[quantity]=1
```


| Name | Description |
|:-----|:------------|
| line_item[variant_id] *required* | Line item variant |
| line_item[options]  | Hash containing the vendor_id and gift card details.
                          It's used to set the price based on vendor |
| line_item[quantity]  | Line item quantity |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;e501e3a7c5d9eacae74f671b52d20f67&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ee80f166-1e62-499e-967a-98fe37bf19a9
X-Runtime: 0.165252
Vary: Origin
Content-Length: 1080
201 Created
```


```json
{
  "id": 27,
  "quantity": 1,
  "price": "19.99",
  "variant_id": 145,
  "vendor_id": 272,
  "single_display_amount": "$19.99",
  "display_amount": "$19.99",
  "total": "19.99",
  "on_sale": false,
  "final_sale": false,
  "backordered": null,
  "promotionable": true,
  "variant": {
    "id": 145,
    "name": "Product #79 - 9934",
    "sku": "SKU-145",
    "is_master": false,
    "slug": "product-79-9934",
    "description": "As seen on TV!",
    "track_inventory": true,
    "cost_price": "17.0",
    "price": "19.99",
    "display_price": "$19.99",
    "options_text": "Size: S",
    "in_stock": false,
    "is_backorderable": true,
    "total_on_hand": 0,
    "is_destroyed": false,
    "option_values": [
      {
        "id": 65,
        "name": "Size-65",
        "presentation": "S",
        "option_type_name": "foo-size-65",
        "option_type_id": 65,
        "option_type_presentation": "Size",
        "position": 1
      }
    ],
    "images": [

    ],
    "videos": [

    ],
    "product_id": 79,
    "lead_time": 2,
    "brand": null,
    "brand_slug": null,
    "brand_description": null
  },
  "monogram": null,
  "gift_cards": [
    {
      "recipient_name": null,
      "recipient_email": null,
      "purchaser_name": null,
      "gift_message": null,
      "send_email_at": "2021-06-21T00:00:00.000-04:00"
    }
  ],
  "vendor_name": "Vendor #273",
  "country_iso": null,
  "domestic_override": null,
  "adjustments": [

  ]
}
```



## Deleting a line item


### Request

#### Endpoint

```plaintext
DELETE /api/orders/M136598648/line_items/28
Accept: application/json
Authorizat IO N: Bearer a7bbca7a98ea89f031f803067f9ea9aebd35d527fc41ce48
X-Spree-Order-Token: TwOw8TqofK2CEqt-9cggyw
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/orders/:order_number/line_items/:line_item_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: c00af164-6b72-4c7d-bf5e-08af5933b79a
X-Runtime: 0.111341
Vary: Origin
204 No Content
```




## Updating a line item


### Request

#### Endpoint

```plaintext
PUT /api/orders/M722204413/line_items/31
Accept: application/json
Authorizat IO N: Bearer eb502d48a22e8f563b9b14ff547add3bfe6bcbe0309e7216
X-Spree-Order-Token: 4zsyP8c4xcv8ZK2ZM3BgfQ
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/orders/:order_number/line_items/:line_item_id`

#### Parameters


```json
line_item[quantity]=2
```


| Name | Description |
|:-----|:------------|
| line_item[options]  | Hash containing the vendor_id |
| line_item[quantity] *required* | Line item quantity |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;36aa4859126a3a3ba9ba668486d6fcb6&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 4da0a189-069f-4856-aa0d-eae0d502ba62
X-Runtime: 0.151647
Vary: Origin
Content-Length: 940
200 OK
```


```json
{
  "id": 31,
  "quantity": 2,
  "price": "10.0",
  "variant_id": 155,
  "vendor_id": 291,
  "single_display_amount": "$10.00",
  "display_amount": "$20.00",
  "total": "20.0",
  "on_sale": false,
  "final_sale": false,
  "backordered": null,
  "promotionable": true,
  "variant": {
    "id": 155,
    "name": "Product #85 - 703",
    "sku": "SKU-154",
    "is_master": false,
    "slug": "product-85-703",
    "description": "As seen on TV!",
    "track_inventory": true,
    "cost_price": "17.0",
    "price": "10.0",
    "display_price": "$10.00",
    "options_text": "Size: S",
    "in_stock": true,
    "is_backorderable": true,
    "total_on_hand": 10,
    "is_destroyed": false,
    "option_values": [
      {
        "id": 70,
        "name": "Size-70",
        "presentation": "S",
        "option_type_name": "foo-size-70",
        "option_type_id": 70,
        "option_type_presentation": "Size",
        "position": 1
      }
    ],
    "images": [

    ],
    "videos": [

    ],
    "product_id": 85,
    "lead_time": 2,
    "brand": null,
    "brand_slug": null,
    "brand_description": null
  },
  "monogram": null,
  "gift_cards": [

  ],
  "vendor_name": "Vendor #292",
  "country_iso": "US",
  "domestic_override": false,
  "adjustments": [

  ]
}
```



# Minis

Create a mini. Any user can create a mini of their own, admins can create minis for other users.

## Create a mini


### Request

#### Endpoint

```plaintext
POST /api/minis
Accept: application/json
Authorizat IO N: Bearer 9bd5a2b2467c42416d724e34b19841b75c04e404fd908a94
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/minis`

#### Parameters


```json
mini[name]=Winny&mini[user_id]=8&mini[birth_year]=2019&mini[birth_month]=1&mini[birth_day]=1
```


| Name | Description |
|:-----|:------------|
| mini[name] *required* | Mini name |
| mini[user_id]  | User ID must match that of the current_api_user unless the current_api_user is an admin.                 User ID will be inferred from the current_api_user unless explicitly provided |
| mini[birth_year] *required* | Mini birth year |
| mini[birth_month] *required* | Mini birth month |
| mini[birth_day]  | Mini birth day |
| mini[gender_boy]  | Mini gender boy |
| mini[gender_girl]  | Mini gender girl |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;5bfadc180ccd95cfb12f4d4d2002c600&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 8440dc54-88df-466b-bcca-c66224700bfb
X-Runtime: 0.071852
Vary: Origin
Content-Length: 161
201 Created
```


```json
{
  "id": 1,
  "user_id": 8,
  "name": "Winny",
  "birth_year": 2019,
  "birth_month": 1,
  "birth_day": 1,
  "gender_boy": true,
  "gender_girl": true,
  "gender_taxons": [

  ],
  "age_range_taxons": [

  ]
}
```



## Delete a mini


### Request

#### Endpoint

```plaintext
DELETE /api/minis/17
Accept: application/json
Authorizat IO N: Bearer baaf900a22de761447b293f030e3763be5f1bab034fd7dd2
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/minis/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 63210f71-2850-420a-a31c-916514099a19
X-Runtime: 0.009664
Vary: Origin
204 No Content
```




## Get a single mini


### Request

#### Endpoint

```plaintext
GET /api/minis/18
Accept: application/json
Authorizat IO N: Bearer 1cd2ae04fb029f2bfaac7b14e63413c8ae10cbc6db2d8745
Host: example.org
Cookie: 
```

`GET /api/minis/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;dc207b0ffe32ced3a4e783f00ca15e73&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: cc76f58d-199c-4699-9186-40f8e4640781
X-Runtime: 0.013052
Vary: Origin
Content-Length: 163
200 OK
```


```json
{
  "id": 18,
  "user_id": 23,
  "name": "Mini",
  "birth_year": 2021,
  "birth_month": 6,
  "birth_day": 20,
  "gender_boy": true,
  "gender_girl": true,
  "gender_taxons": [

  ],
  "age_range_taxons": [

  ]
}
```



## Get all minis


### Request

#### Endpoint

```plaintext
GET /api/minis
Accept: application/json
Authorizat IO N: Bearer 480b16b7dd52486eb1233b892b7f67bad64ea465ebe47720
Host: example.org
Cookie: 
```

`GET /api/minis`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[user_id_eq]  | Anything accessible by ransack can be passed in as query params |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;ffdd65a59a77c33cf42ef316b8d0d3a8&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 9280434e-40e9-4c34-a63a-c358be64baea
X-Runtime: 0.040669
Vary: Origin
Content-Length: 1717
200 OK
```


```json
{
  "minis": [
    {
      "id": 16,
      "user_id": 20,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 15,
      "user_id": 19,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 14,
      "user_id": 18,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 13,
      "user_id": 17,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 12,
      "user_id": 16,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 11,
      "user_id": 15,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 10,
      "user_id": 14,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 9,
      "user_id": 13,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 8,
      "user_id": 12,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 7,
      "user_id": 11,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    }
  ],
  "count": 10,
  "total_count": 10,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Get my minis


### Request

#### Endpoint

```plaintext
GET /api/minis/mine
Accept: application/json
Authorizat IO N: Bearer c0bfc0d4e6e66f1b87613e7f5da0a5f010b4e82558395879
Host: example.org
Cookie: 
```

`GET /api/minis/mine`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[user_id_eq]  | Anything accessible by ransack can be passed in as query params |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;3c36ab440568b676a85d4a6389516f6e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ddc8979a-4b9f-4874-a8d4-8515c2fa549f
X-Runtime: 0.020167
Vary: Origin
Content-Length: 404
200 OK
```


```json
{
  "minis": [
    {
      "id": 6,
      "user_id": 10,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    },
    {
      "id": 5,
      "user_id": 10,
      "name": "Mini",
      "birth_year": 2021,
      "birth_month": 6,
      "birth_day": 20,
      "gender_boy": true,
      "gender_girl": true,
      "gender_taxons": [

      ],
      "age_range_taxons": [

      ]
    }
  ],
  "count": 2,
  "total_count": 2,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Update a mini


### Request

#### Endpoint

```plaintext
PATCH /api/minis/19
Accept: application/json
Authorizat IO N: Bearer f4c21cfdd84118fbcc473c3114e63e46f3673e93f3097772
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/minis/:id`

#### Parameters


```json
mini[name]=Marge
```


| Name | Description |
|:-----|:------------|
| mini[name]  | Mini name |
| mini[user_id]  | User ID must match that of the current_api_user unless the current_api_user is an admin.                 User ID will be inferred from the current_api_user unless explicitly provided |
| mini[birth_year]  | Mini birth year |
| mini[birth_month]  | Mini birth month |
| mini[birth_day]  | Mini birth day |
| mini[gender_boy]  | Mini gender boy |
| mini[gender_girl]  | Mini gender girl |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;6869e4598b12bc5ee21a1c2d6bd586d3&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 334051a8-a82f-411c-bdc1-2d9de9356598
X-Runtime: 0.020282
Vary: Origin
Content-Length: 164
200 OK
```


```json
{
  "id": 19,
  "user_id": 24,
  "name": "Marge",
  "birth_year": 2021,
  "birth_month": 6,
  "birth_day": 20,
  "gender_boy": true,
  "gender_girl": true,
  "gender_taxons": [

  ],
  "age_range_taxons": [

  ]
}
```



# OMS Appeasement

Create an appeasement for braintree

## Create an appeasement with 1 refund on braintree/store_credit/gift_card


### Request

#### Endpoint

```plaintext
POST /api/oms/appeasements
Accept: application/json
Authorizat IO N: Bearer 32fea1ee8c3922f4376d07c752fa14623c49d8ce403839b6
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/appeasements`

#### Parameters


```json
appeasement[total]=30.0&appeasement[refunds][][reimbursement_method]=braintree&appeasement[refunds][][amount]=10&appeasement[refunds][][payment_number]=4Y2B6MMT&appeasement[refunds][][transaction_id]=ABC123&appeasement[refunds][][reimbursement_method]=gift_card&appeasement[refunds][][gift_card_email]=admin%40example.com&appeasement[refunds][][amount]=10&appeasement[refunds][][reimbursement_method]=store_credit&appeasement[refunds][][amount]=10&appeasement%5Binfo%5D%5B%5D[order_item_summary_id]=line_item_1&appeasement%5Binfo%5D%5B%5D[label]=Never+Worked&appeasement%5Binfo%5D%5B%5D[amount]=30&appeasement%5Brefunds%5D%5B%5D[amount]=30
```


| Name | Description |
|:-----|:------------|
| appeasement[total] *required* | Total amount of the appeasement |
| appeasement[info] *required* | Array of adjustment to create on the order |
| appeasement[info][][order_item_summary_id] *required* | Reference of line item to link the adjustments |
| appeasement[info][][label] *required* | Refund adjustment label |
| appeasement[info][][amount] *required* | Adjustment amount |
| appeasement[refunds] *required* | Array of refund or credit to create on the reimbursement |
| appeasement[refunds][][reimbursement_method] *required* | It can be braintree/store_credit/gift_card |
| appeasement[refunds][][amount] *required* | Amount of the refund/credit |
| appeasement[refunds][][payment_id] *required* | Payment ID of the transaction(only for braintree) |
| appeasement[refunds][][transaction_id] *required* | Transaction id of refund(only for braintree) |
| appeasement[refunds][][gift_card_email] *required* | Gift card email(only for gift_card) |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;888f8adbf050a0e0ff9f25da3f305c9e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 4f3cc0b4-31bb-4df8-b722-f107b129508f
X-Runtime: 0.172914
Vary: Origin
Content-Length: 270
201 Created
```


```json
{
  "appeasement": {
    "id": 2,
    "number": "RI301338824",
    "reimbursement_status": "reimbursed",
    "customer_return_id": null,
    "order_id": 20,
    "total": "30.0",
    "created_at": "2021-06-21T15:45:00.082-04:00",
    "updated_at": "2021-06-21T15:45:00.134-04:00",
    "mirakl_order_line_reimbursement_id": null
  }
}
```



# OMS Cancellation

Create an cancellation for braintree

## Create an cancel with 1 refund on braintree/store_credit/gift_card


### Request

#### Endpoint

```plaintext
POST /api/oms/cancellations
Accept: application/json
Authorizat IO N: Bearer b587f7a302111a9c040432c45376ee62bd40c73fba7aa6d7
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/cancellations`

#### Parameters


```json
cancel[total]=10.0&cancel[refunds][][reimbursement_method]=braintree&cancel[refunds][][amount]=10&cancel[refunds][][payment_number]=C3EQUNUV&cancel[refunds][][transaction_id]=ABC123&cancel[refunds][][reimbursement_method]=gift_card&cancel[refunds][][gift_card_email]=admin%40example.com&cancel[refunds][][amount]=10&cancel[refunds][][reimbursement_method]=store_credit&cancel[refunds][][amount]=10&cancel%5Binfo%5D%5B%5D[order_item_summary_id]=line_item_1&cancel%5Binfo%5D%5B%5D[label]=Never+Worked&cancel%5Binfo%5D%5B%5D[quantity]=1
```


| Name | Description |
|:-----|:------------|
| cancel[total] *required* | Total amount of the cancellation |
| cancel[reason_external_id] *required* | Refund reason id |
| cancel[info] *required* | Array of adjustment to create on the order |
| cancel[info][][order_item_summary_id] *required* | Reference of line item to link the adjustments |
| cancel[info][][label] *required* | Refund label |
| cancel[info][][quantity] *required* | Quantity of line item to cancel |
| cancel[refunds] *required* | Array of refund or credit to create on the reimbursement |
| cancel[refunds][][reimbursement_method] *required* | It can be braintree/store_credit/gift_card |
| cancel[refunds][][amount] *required* | Amount of the refund/credit |
| cancel[refunds][][payment_id] *required* | Payment ID of the transaction(only for braintree) |
| cancel[refunds][][transaction_id] *required* | Transaction id of refund(only for braintree) |
| cancel[refunds][][gift_card_email] *required* | Gift card email(only for gift_card) |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;2572c2bbda58419dc9f6c1c08564c82c&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: f67ad763-7086-4983-88ae-6e9792dded89
X-Runtime: 0.349354
Vary: Origin
Content-Length: 265
201 Created
```


```json
{
  "cancel": {
    "id": 1,
    "number": "RI857301587",
    "reimbursement_status": "reimbursed",
    "customer_return_id": null,
    "order_id": 10,
    "total": "10.0",
    "created_at": "2021-06-21T15:44:41.498-04:00",
    "updated_at": "2021-06-21T15:44:41.632-04:00",
    "mirakl_order_line_reimbursement_id": null
  }
}
```



# OMS Carton

Update a carton and its shipments tracking info.

## Create a carton containing the provided inventory_units


### Request

#### Endpoint

```plaintext
POST /api/oms/cartons
Accept: application/json
Authorizat IO N: Bearer 4e37ab5831e0f0e80a8821f7bbfebf61997a35bdc4593fe3
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/cartons`

#### Parameters


```json
carton[tracking]=https%3A%2F%2Ftracking.code&carton[shipping_carrier_code]=SHIPPING_CARRIER_CODE&carton[shipment_number]=H18458352005&carton%5Bitems%5D%5B%5D[order_item_summary_ref]=line_item_1&carton%5Bitems%5D%5B%5D[quantity]=1
```


| Name | Description |
|:-----|:------------|
| carton[tracking] *required* | Tracking code of the carton |
| carton[shipping_carrier_code] *required* | Shipping carrier code |
| carton[shipment_number] *required* | Solidus Shipment number |
| carton[items] *required* | Array of adjustment to create on the order |
| carton[items][][order_item_summary_ref] *required* | Reference of line item to take the inventory_units to put in the carton |
| carton[items][][quantity] *required* | Quantity of line item to put in the carton |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;16a59ae303f5360a8cb40f0908f769dc&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 1cebf10d-90d1-4334-b5bf-165a996a9319
X-Runtime: 0.037707
Vary: Origin
Content-Length: 390
201 Created
```


```json
{
  "carton": {
    "id": 2,
    "number": "C33423387276",
    "external_number": "H18458352005",
    "stock_location_id": 49,
    "address_id": 45,
    "shipping_method_id": 14,
    "tracking": "https://tracking.code",
    "shipped_at": null,
    "created_at": "2021-06-21T15:45:02.282-04:00",
    "updated_at": "2021-06-21T15:45:02.282-04:00",
    "imported_from_shipment_id": 24,
    "shipping_carrier_code": "SHIPPING_CARRIER_CODE",
    "override_tracking_url": null
  }
}
```



## Update a carton and its shipments with the provided params


### Request

#### Endpoint

```plaintext
PUT /api/oms/cartons
Accept: application/json
Authorizat IO N: Bearer 25fe59762dc40341b1607ed013a64d180c60abfbb3c2c212
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/oms/cartons`

#### Parameters


```json
tracking=012345&shipping_carrier_code=carrier_code&override_tracking_url=http%3A%2F%2Ftracking.info
```


| Name | Description |
|:-----|:------------|
| tracking *required* | The tracking code that will be used to find the correct carton to update |
| shipping_carrier_code  | The shipping carrier code to update |
| override_tracking_url  | The tracking URL override |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;d44fddf3222fd49cc62ee9da191cdaca&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: a20b4bc6-edfd-484e-a93e-e7383b61b252
X-Runtime: 0.045338
Vary: Origin
Content-Length: 914
200 OK
```


```json
{
  "carton": {
    "id": 1,
    "tracking": "012345",
    "shipping_carrier_code": "carrier_code",
    "override_tracking_url": "http://tracking.info",
    "address_id": 39,
    "stock_location_id": 47,
    "shipping_method_id": 13,
    "number": "C18446423455",
    "external_number": null,
    "shipped_at": "2021-06-21T15:45:01.379-04:00",
    "created_at": "2021-06-21T15:45:01.588-04:00",
    "updated_at": "2021-06-21T15:45:01.668-04:00",
    "imported_from_shipment_id": null
  },
  "shipments": [
    {
      "id": 23,
      "tracking": "012345",
      "shipping_carrier_code": "carrier_code",
      "override_tracking_url": "http://tracking.info",
      "cost": "100.0",
      "state": "pending",
      "number": "H82174454138",
      "shipped_at": null,
      "order_id": 25,
      "deprecated_address_id": null,
      "created_at": "2021-06-21T15:45:01.592-04:00",
      "updated_at": "2021-06-21T15:45:01.658-04:00",
      "stock_location_id": 47,
      "adjustment_total": "0.0",
      "additional_tax_total": "0.0",
      "promo_total": "0.0",
      "included_tax_total": "0.0",
      "easypost_error": null,
      "delivery_estimation": null
    }
  ]
}
```



# OMS Promotion Codes

Create a code for a promotion that matches value and type. It creates a new promotion if not found

## Create a promotion code for a new $10 off promotion


### Request

#### Endpoint

```plaintext
POST /api/oms/promotion_codes
Accept: application/json
Authorizat IO N: Bearer 0319306ab3b154e040442ad5fc2716cc51600387e52aaebc
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/promotion_codes`

#### Parameters


```json
promotion_code[recipient_email]=john%40example.com&promotion_code[type]=flat&promotion_code[value]=10
```


| Name | Description |
|:-----|:------------|
| promotion_code[recipient_email] *required* | E-mail that will receive the code |
| promotion_code[type] *required* | The type of the promotion calculator. Accepted values are: flat, percent |
| promotion_code[value] *required* | The value amount or percent used by the promotion calculator |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;fc34c02f41f5eceeac473205a6e8dca0&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ee02f1d5-2179-4b1d-95e4-940cf67a2969
X-Runtime: 0.058931
Vary: Origin
Content-Length: 202
201 Created
```


```json
{
  "promotion_code": {
    "id": 6,
    "promotion_id": 8,
    "value": "udterjrq",
    "created_at": "2021-06-21T15:45:00.312-04:00",
    "updated_at": "2021-06-21T15:45:00.312-04:00",
    "promotion_code_batch_id": null,
    "expires_at": null
  }
}
```



## Create a promotion code for an existing $10 off promotion


### Request

#### Endpoint

```plaintext
POST /api/oms/promotion_codes
Accept: application/json
Authorizat IO N: Bearer f7b7e728daacefa4ad9286b027d2277d19626a781ed14a68
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/promotion_codes`

#### Parameters


```json
promotion_code[recipient_email]=john%40example.com&promotion_code[type]=flat&promotion_code[value]=10.5
```


| Name | Description |
|:-----|:------------|
| promotion_code[recipient_email] *required* | E-mail that will receive the code |
| promotion_code[type] *required* | The type of the promotion calculator. Accepted values are: flat, percent |
| promotion_code[value] *required* | The value amount or percent used by the promotion calculator |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;82390c6158c94b3b9efa2f80bb6d7db0&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: c053a540-070f-4ce7-8897-947d961baf3f
X-Runtime: 0.017507
Vary: Origin
Content-Length: 203
201 Created
```


```json
{
  "promotion_code": {
    "id": 8,
    "promotion_id": 10,
    "value": "pgxbbrtr",
    "created_at": "2021-06-21T15:45:00.439-04:00",
    "updated_at": "2021-06-21T15:45:00.439-04:00",
    "promotion_code_batch_id": null,
    "expires_at": null
  }
}
```



## Create a promotion code for an existing 20% off promotion


### Request

#### Endpoint

```plaintext
POST /api/oms/promotion_codes
Accept: application/json
Authorizat IO N: Bearer ab777eecc5f626c8818301d52e9118ed9a56c74d973b2fb7
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/promotion_codes`

#### Parameters


```json
promotion_code[recipient_email]=john%40example.com&promotion_code[type]=percent&promotion_code[value]=20
```


| Name | Description |
|:-----|:------------|
| promotion_code[recipient_email] *required* | E-mail that will receive the code |
| promotion_code[type] *required* | The type of the promotion calculator. Accepted values are: flat, percent |
| promotion_code[value] *required* | The value amount or percent used by the promotion calculator |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;e4af2f90379ac1d523d9058b55399d98&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: dffe170d-2250-4d77-b04f-ae7ea856839c
X-Runtime: 0.017876
Vary: Origin
Content-Length: 202
201 Created
```


```json
{
  "promotion_code": {
    "id": 7,
    "promotion_id": 9,
    "value": "dgwxjldp",
    "created_at": "2021-06-21T15:45:00.381-04:00",
    "updated_at": "2021-06-21T15:45:00.381-04:00",
    "promotion_code_batch_id": null,
    "expires_at": null
  }
}
```



## Returns error when an invalid type is provided


### Request

#### Endpoint

```plaintext
POST /api/oms/promotion_codes
Accept: application/json
Authorizat IO N: Bearer bc4ec6a3556f9b5e9650839561fcf47c684645b1e15d4559
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/promotion_codes`

#### Parameters


```json
promotion_code[recipient_email]=john%40example.com&promotion_code[type]=wrong&promotion_code[value]=10
```


| Name | Description |
|:-----|:------------|
| promotion_code[recipient_email] *required* | E-mail that will receive the code |
| promotion_code[type] *required* | The type of the promotion calculator. Accepted values are: flat, percent |
| promotion_code[value] *required* | The value amount or percent used by the promotion calculator |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: e24f1b6f-b864-4e06-9853-3c1dada2098a
X-Runtime: 0.007189
Vary: Origin
Content-Length: 84
422 Unprocessable Entity
```


```json
{
  "error": "The informed type (wrong) is invalid. The valid types are: flat, percent"
}
```



# OMS Promotion Eligible

Check which line items in the order are eligible for the coupon_code

## Return the eligible items for that coupon code


### Request

#### Endpoint

```plaintext
GET /api/oms/promotion_eligibility?order_number=M993240913&amp;coupon_code=code3
Accept: application/json
Authorizat IO N: Bearer abfbb026756504b62736ba6126132d29a5e258768d9f6619
Host: example.org
Cookie: 
```

`GET /api/oms/promotion_eligibility`

#### Parameters


```json
order_number: M993240913
coupon_code: code3
```


| Name | Description |
|:-----|:------------|
| order_number *required* | Order number to check |
| coupon_code *required* | Coupon Code to apply |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;4f89a5a7447b26c84632d2d919567f5d&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: e9d99597-698e-4ccd-b92a-637a3a5fae13
X-Runtime: 0.115705
Vary: Origin
Content-Length: 94
200 OK
```


```json
{
  "success": true,
  "items": [
    {
      "type": "Spree::LineItem",
      "id": 24,
      "order_item_summary_ref": "SF001"
    }
  ]
}
```



# OMS Return

Create a return authorization

## Create an return authorization


### Request

#### Endpoint

```plaintext
POST /api/oms/returns
Accept: application/json
Authorizat IO N: Bearer 9058dfbb857c2859035ad0d67b8dbb2aaed470877c78ff50
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/oms/returns`

#### Parameters


```json
return[total]=10.0&return[tracking_url]=https%3A%2F%2Ftracking.url%2Fcarrier&return%5Binfo%5D%5B%5D[order_item_summary_ref]=line_item_1&return%5Binfo%5D%5B%5D[quantity]=2&return%5Binfo%5D%5B%5D[return_reason_external_id]=Z2lkOi8vZW52ZjFkZTllNDg5YmE4OGNiMTU5NjhiOTdmNDBmNTllOGVmMGRhNWNhMDNhZDFmMzdmYzEzYTJhYTQ1YTI1MTJhOS1tYWlzb25ldHRlLWJhY2tlbmQvT3JkZXJNYW5hZ2VtZW50OjpSZWFzb24vNTU0ZGM5ZWQtNWMwZC00YjgwLTliYzEtNmQ4MWQ0N2YzNGVh
```


| Name | Description |
|:-----|:------------|
| return[total] *required* | Total amount of the return |
| return[tracking_url] *required* | Tracking url of return authorization |
| return[info] *required* | Array of adjustment to create on the order |
| return[info][][order_item_summary_ref] *required* | Reference of line item to link the adjustments |
| return[info][][quantity] *required* | number of item to return for that line item |
| return[info][][return_reason_external_id] *required* | Return reason external id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;d2a68f63b57333deb0902e2643916c46&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: d8c429c3-6ff2-4ec7-82fa-03022257fccf
X-Runtime: 0.151924
Vary: Origin
Content-Length: 300
201 Created
```


```json
{
  "return": {
    "id": 1,
    "number": "RA246521612",
    "state": "authorized",
    "order_id": 12,
    "memo": null,
    "created_at": "2021-06-21T15:44:46.937-04:00",
    "updated_at": "2021-06-21T15:44:46.937-04:00",
    "stock_location_id": 24,
    "return_reason_id": null,
    "gift_recipient_email": null,
    "tracking_url": "https://tracking.url/carrier"
  }
}
```



# Orders



## Add a gift card item to a cart


### Request

#### Endpoint

```plaintext
POST /api/orders/cart
Accept: application/json
Authorizat IO N: Bearer 629ddc64cef88a2272e15a6f5c2cd4591b11c7250aa01322
X-Spree-Order-Token: 
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/cart`

#### Parameters


```json
user_id&order_token&line_item[variant_id]=4&line_item[quantity]=1&line_item[vendor_id]=4&line_item[gift_card_details_attributes][recipient_name]=Recipient+John&line_item[gift_card_details_attributes][recipient_email]=recipient%40email.com&line_item[gift_card_details_attributes][purchaser_name]=Purchaser+Bob&line_item[gift_card_details_attributes][gift_message]=Surprise&line_item[gift_card_details_attributes][send_email_at]=2021-06-21
```


| Name | Description |
|:-----|:------------|
| user_id  | Specify the user_id here if there is one. Calls to this endpoint without a user_id will                          create an order with a nil user |
| order_token  | Spree will look for an order with the order token if it is provided. If an order with                              the specified token is not found, Spree will create a new order with an autogenerated                              guest token that should be stored in cookies and returned with subsequent calls. The                              order token can be passed as a parameter or a header. If passed as both a header and                              parameter, the header will take precedence. |
| line_item[variant_id] *required* | Specify the variant id |
| line_item[quantity] *required* | Specify the quantity requested, must be greater than 0 |
| line_item[vendor_id] *required* | Specify the vendor id, from the price chosen |
| line_item[gift_card_details_attributes]  | Line item gift card details attributes |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;47aa95daf882a17500ebda6190d899f0&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 50de0a92-f9f2-400e-98c8-4be5a82b99d3
X-Runtime: 0.523538
Vary: Origin
Content-Length: 2871
200 OK
```


```json
{
  "id": 1,
  "number": "M688842576",
  "item_total": "19.99",
  "total": "19.99",
  "ship_total": "0.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": 1,
  "created_at": "2021-06-21T15:44:32.594-04:00",
  "updated_at": "2021-06-21T15:44:32.693-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email1@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "19.99",
  "display_order_total_after_store_credit": "$19.99",
  "total_applicable_store_credit": 0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$19.99",
  "total_quantity": 1,
  "display_total": "$19.99",
  "display_ship_total": "$0.00",
  "display_tax_total": "$0.00",
  "token": "PVODes8qguEOw1tcw5UaVA",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M688842576&bzip=&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": null,
  "ship_address": null,
  "line_items": [
    {
      "id": 1,
      "quantity": 1,
      "price": "19.99",
      "variant_id": 4,
      "vendor_id": 4,
      "single_display_amount": "$19.99",
      "display_amount": "$19.99",
      "total": "19.99",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 4,
        "name": "Product #1 - 4960",
        "sku": "SKU-4",
        "is_master": false,
        "slug": "product-1-4960",
        "description": "As seen on TV!",
        "track_inventory": true,
        "cost_price": "17.0",
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": false,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 2,
            "name": "Size-2",
            "presentation": "S",
            "option_type_name": "foo-size-2",
            "option_type_id": 2,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 1,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [
        {
          "recipient_name": "Recipient John",
          "recipient_email": "recipient@email.com",
          "purchaser_name": "Purchaser Bob",
          "gift_message": "Surprise",
          "send_email_at": "2021-06-21T00:00:00.000-04:00"
        }
      ],
      "vendor_name": "Vendor #4",
      "country_iso": null,
      "domestic_override": null,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [

  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": true
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "19.99",
    "item_total": "19.99",
    "shipments_total": "0.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Add an item to a cart


### Request

#### Endpoint

```plaintext
POST /api/orders/cart
Accept: application/json
Authorizat IO N: 
X-Spree-Order-Token: 
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/cart`

#### Parameters


```json
user_id&order_token&line_item[variant_id]=16&line_item[quantity]=2&line_item[vendor_id]=25
```


| Name | Description |
|:-----|:------------|
| user_id  | Specify the user_id here if there is one. Calls to this endpoint without a user_id will                          create an order with a nil user |
| order_token  | Spree will look for an order with the order token if it is provided. If an order with                              the specified token is not found, Spree will create a new order with an autogenerated                              guest token that should be stored in cookies and returned with subsequent calls. The                              order token can be passed as a parameter or a header. If passed as both a header and                              parameter, the header will take precedence. |
| line_item[variant_id] *required* | Specify the variant id |
| line_item[quantity] *required* | Specify the quantity requested, must be greater than 0 |
| line_item[vendor_id] *required* | Specify the vendor id, from the price chosen |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;705fe241f9dafef43547189ec6c54126&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 13fb9c0a-4525-4bf1-a35e-31b6af376921
X-Runtime: 0.107091
Vary: Origin
Content-Length: 2664
200 OK
```


```json
{
  "id": 4,
  "number": "M075508769",
  "item_total": "39.98",
  "total": "39.98",
  "ship_total": "0.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": null,
  "created_at": "2021-06-21T15:44:36.717-04:00",
  "updated_at": "2021-06-21T15:44:36.759-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": null,
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "39.98",
  "display_order_total_after_store_credit": "$39.98",
  "total_applicable_store_credit": 0.0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$39.98",
  "total_quantity": 2,
  "display_total": "$39.98",
  "display_ship_total": "$0.00",
  "display_tax_total": "$0.00",
  "token": "MBc9HapK5K0GgjYXjDxZwg",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M075508769&bzip=&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": null,
  "ship_address": null,
  "line_items": [
    {
      "id": 6,
      "quantity": 2,
      "price": "19.99",
      "variant_id": 16,
      "vendor_id": 25,
      "single_display_amount": "$19.99",
      "display_amount": "$39.98",
      "total": "39.98",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 16,
        "name": "Product #8 - 7154",
        "sku": "SKU-15",
        "is_master": false,
        "slug": "product-8-7154",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": false,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 8,
            "name": "Size-8",
            "presentation": "S",
            "option_type_name": "foo-size-8",
            "option_type_id": 8,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 8,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #25",
      "country_iso": null,
      "domestic_override": null,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [

  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "39.98",
    "item_total": "39.98",
    "shipments_total": "0.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Add an item to a cart related to the user


### Request

#### Endpoint

```plaintext
POST /api/orders/cart
Accept: application/json
Authorizat IO N: 
X-Spree-Order-Token: 
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/cart`

#### Parameters


```json
user_id&order_token&line_item[variant_id]=20&line_item[quantity]=2&line_item[vendor_id]=33
```


| Name | Description |
|:-----|:------------|
| user_id  | Specify the user_id here if there is one. Calls to this endpoint without a user_id will                          create an order with a nil user |
| order_token  | Spree will look for an order with the order token if it is provided. If an order with                              the specified token is not found, Spree will create a new order with an autogenerated                              guest token that should be stored in cookies and returned with subsequent calls. The                              order token can be passed as a parameter or a header. If passed as both a header and                              parameter, the header will take precedence. |
| line_item[variant_id] *required* | Specify the variant id |
| line_item[quantity] *required* | Specify the quantity requested, must be greater than 0 |
| line_item[vendor_id] *required* | Specify the vendor id, from the price chosen |
| token  | Specify the spree_api_key here if there is one. Calls to this endpoint without a it will \
                         create an order with a nil user |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bce34f2cecf566e8090039bc18edb9f5&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 49287d88-bb85-4a6a-8e55-a4821d8c1468
X-Runtime: 0.130222
Vary: Origin
Content-Length: 2671
200 OK
```


```json
{
  "id": 5,
  "number": "M374562384",
  "item_total": "39.98",
  "total": "39.98",
  "ship_total": "0.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": null,
  "created_at": "2021-06-21T15:44:37.253-04:00",
  "updated_at": "2021-06-21T15:44:37.310-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": null,
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "39.98",
  "display_order_total_after_store_credit": "$39.98",
  "total_applicable_store_credit": 0.0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$39.98",
  "total_quantity": 2,
  "display_total": "$39.98",
  "display_ship_total": "$0.00",
  "display_tax_total": "$0.00",
  "token": "fE3shzLaZUiZEhRw8ZFQRA",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M374562384&bzip=&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": null,
  "ship_address": null,
  "line_items": [
    {
      "id": 7,
      "quantity": 2,
      "price": "19.99",
      "variant_id": 20,
      "vendor_id": 33,
      "single_display_amount": "$19.99",
      "display_amount": "$39.98",
      "total": "39.98",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 20,
        "name": "Product #10 - 8766",
        "sku": "SKU-19",
        "is_master": false,
        "slug": "product-10-8766",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": false,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 10,
            "name": "Size-10",
            "presentation": "S",
            "option_type_name": "foo-size-10",
            "option_type_id": 10,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 10,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #33",
      "country_iso": null,
      "domestic_override": null,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [

  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "39.98",
    "item_total": "39.98",
    "shipments_total": "0.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Add an item to a cart related to the user


### Request

#### Endpoint

```plaintext
POST /api/orders/cart
Accept: application/json
Authorizat IO N: Bearer 0bfef512d7caa14d37cb33186167636530b6db5db6b5d93b
X-Spree-Order-Token: 
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/cart`

#### Parameters


```json
user_id&order_token&line_item[variant_id]=24&line_item[quantity]=2&line_item[vendor_id]=41&user_token=Bearer+0bfef512d7caa14d37cb33186167636530b6db5db6b5d93b
```


| Name | Description |
|:-----|:------------|
| user_id  | Specify the user_id here if there is one. Calls to this endpoint without a user_id will                          create an order with a nil user |
| order_token  | Spree will look for an order with the order token if it is provided. If an order with                              the specified token is not found, Spree will create a new order with an autogenerated                              guest token that should be stored in cookies and returned with subsequent calls. The                              order token can be passed as a parameter or a header. If passed as both a header and                              parameter, the header will take precedence. |
| line_item[variant_id] *required* | Specify the variant id |
| line_item[quantity] *required* | Specify the quantity requested, must be greater than 0 |
| line_item[vendor_id] *required* | Specify the vendor id, from the price chosen |
| user_token  | Specify the spree_api_key here if there is one. Calls to this endpoint without a it will \
                              create an order with a nil user |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;1487f3a618fe47f21a0d05a296af41db&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: e143d8a4-5735-420f-86fb-6a8b4a45d615
X-Runtime: 0.154554
Vary: Origin
Content-Length: 2681
200 OK
```


```json
{
  "id": 6,
  "number": "M191017356",
  "item_total": "39.98",
  "total": "39.98",
  "ship_total": "0.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": 5,
  "created_at": "2021-06-21T15:44:37.828-04:00",
  "updated_at": "2021-06-21T15:44:37.874-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email5@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "39.98",
  "display_order_total_after_store_credit": "$39.98",
  "total_applicable_store_credit": 0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$39.98",
  "total_quantity": 2,
  "display_total": "$39.98",
  "display_ship_total": "$0.00",
  "display_tax_total": "$0.00",
  "token": "qShV6WKSqRSRCRKi38najw",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M191017356&bzip=&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": null,
  "ship_address": null,
  "line_items": [
    {
      "id": 8,
      "quantity": 2,
      "price": "19.99",
      "variant_id": 24,
      "vendor_id": 41,
      "single_display_amount": "$19.99",
      "display_amount": "$39.98",
      "total": "39.98",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 24,
        "name": "Product #12 - 3573",
        "sku": "SKU-23",
        "is_master": false,
        "slug": "product-12-3573",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": false,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 12,
            "name": "Size-12",
            "presentation": "S",
            "option_type_name": "foo-size-12",
            "option_type_id": 12,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 12,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #41",
      "country_iso": null,
      "domestic_override": null,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [

  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": true
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "39.98",
    "item_total": "39.98",
    "shipments_total": "0.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Add an item to a order


### Request

#### Endpoint

```plaintext
POST /api/orders/cart
Accept: application/json
Authorizat IO N: 
X-Spree-Order-Token: KBWF8ntF8dXiiZggfpHgBg
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/orders/cart`

#### Parameters


```json
user_id&order_token=KBWF8ntF8dXiiZggfpHgBg&line_item[variant_id]=32&line_item[quantity]=2&line_item[vendor_id]=57
```


| Name | Description |
|:-----|:------------|
| user_id  | Specify the user_id here if there is one. Calls to this endpoint without a user_id will                          create an order with a nil user |
| order_token  | Spree will look for an order with the order token if it is provided. If an order with                              the specified token is not found, Spree will create a new order with an autogenerated                              guest token that should be stored in cookies and returned with subsequent calls. The                              order token can be passed as a parameter or a header. If passed as both a header and                              parameter, the header will take precedence. |
| line_item[variant_id] *required* | Specify the variant id |
| line_item[quantity] *required* | Specify the quantity requested, must be greater than 0 |
| line_item[vendor_id] *required* | Specify the vendor id, from the price chosen |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;f422cbf5ddd0c98cd0cd237b5edfa640&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 79165ec6-5b83-4b09-b5ff-fb34242f7b9d
X-Runtime: 0.127016
Vary: Origin
Content-Length: 2671
200 OK
```


```json
{
  "id": 8,
  "number": "M748843170",
  "item_total": "39.98",
  "total": "39.98",
  "ship_total": "0.0",
  "state": "cart",
  "adjustment_total": "0.0",
  "user_id": null,
  "created_at": "2021-06-21T15:44:39.291-04:00",
  "updated_at": "2021-06-21T15:44:39.343-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": null,
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "39.98",
  "display_order_total_after_store_credit": "$39.98",
  "total_applicable_store_credit": 0.0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$39.98",
  "total_quantity": 2,
  "display_total": "$39.98",
  "display_ship_total": "$0.00",
  "display_tax_total": "$0.00",
  "token": "23HMh_agIN5gJhlUCl4fOQ",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M748843170&bzip=&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": null,
  "ship_address": null,
  "line_items": [
    {
      "id": 11,
      "quantity": 2,
      "price": "19.99",
      "variant_id": 32,
      "vendor_id": 57,
      "single_display_amount": "$19.99",
      "display_amount": "$39.98",
      "total": "39.98",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 32,
        "name": "Product #16 - 6248",
        "sku": "SKU-31",
        "is_master": false,
        "slug": "product-16-6248",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 16,
            "name": "Size-16",
            "presentation": "S",
            "option_type_name": "foo-size-16",
            "option_type_id": 16,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 16,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #57",
      "country_iso": null,
      "domestic_override": null,
      "adjustments": [

      ]
    }
  ],
  "payments": [

  ],
  "shipments": [

  ],
  "adjustments": [

  ],
  "permissions": {
    "can_update": false
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [

  ],
  "subtotals": {
    "order_total": "39.98",
    "item_total": "39.98",
    "shipments_total": "0.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Get my orders


### Request

#### Endpoint

```plaintext
GET /api/orders/mine
Accept: application/json
Authorizat IO N: Bearer d419ae82d5de261da5a6c0b5b926f75594a377730c38863d
Host: example.org
Cookie: 
```

`GET /api/orders/mine`

#### Parameters



| Name | Description |
|:-----|:------------|
| per_page  | Specify the amount of records returned, default is 25 |
| page  | Specify the page |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bfd93c467923e2902c20109270f7395a&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 518d0364-1a17-44e4-8ebb-09b6cb0e7079
X-Runtime: 0.018899
Vary: Origin
Content-Length: 80
200 OK
```


```json
{
  "orders": [

  ],
  "count": 0,
  "total_count": 0,
  "current_page": 1,
  "pages": 0,
  "per_page": 25
}
```



## it returns a 200


### Request

#### Endpoint

```plaintext
GET /api/orders/M411710480
Accept: application/json
Authorizat IO N: Bearer 1cabb4777b7e343e41c6fa1e4516ea0d689bb1290b9d2f53
Host: example.org
Cookie: 
```

`GET /api/orders/:number`

#### Parameters



| Name | Description |
|:-----|:------------|
| number *required* | Specify the order number |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;452151f577e49e35bb5641c29c3fc9cc&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 907593e2-6508-4d48-8d03-7c2586e93f74
X-Runtime: 0.279760
Vary: Origin
Content-Length: 7888
200 OK
```


```json
{
  "id": 2,
  "number": "M411710480",
  "item_total": "20.0",
  "total": "118.0",
  "ship_total": "100.0",
  "state": "payment",
  "adjustment_total": "-2.0",
  "user_id": 2,
  "created_at": "2021-06-21T15:44:33.516-04:00",
  "updated_at": "2021-06-21T15:44:34.537-04:00",
  "completed_at": null,
  "payment_total": "0.0",
  "shipment_state": null,
  "payment_state": null,
  "email": "email2@example.com",
  "special_instructions": null,
  "channel": "spree",
  "included_tax_total": "0.0",
  "additional_tax_total": "0.0",
  "display_included_tax_total": "$0.00",
  "display_additional_tax_total": "$0.00",
  "tax_total": "0.0",
  "currency": "USD",
  "covered_by_store_credit": false,
  "display_total_applicable_store_credit": "$0.00",
  "order_total_after_store_credit": "118.0",
  "display_order_total_after_store_credit": "$118.00",
  "total_applicable_store_credit": 0,
  "display_total_available_store_credit": "$0.00",
  "display_store_credit_remaining_after_capture": "$0.00",
  "canceler_id": null,
  "gift_email": null,
  "gift_message": null,
  "is_gift": false,
  "use_store_credits": false,
  "first_order": false,
  "display_item_total": "$20.00",
  "total_quantity": 2,
  "display_total": "$118.00",
  "display_ship_total": "$100.00",
  "display_tax_total": "$0.00",
  "token": "l1VYDlKEokRvvjmqsFegrw",
  "checkout_steps": [
    "address",
    "delivery",
    "payment",
    "confirm",
    "complete"
  ],
  "eligible_for_return": null,
  "narvar_return_url": "http://localhost:4000/order?order=M411710480&bzip=10001&init=true",
  "free_shipping_threshold": null,
  "payment_methods": [

  ],
  "bill_address": {
    "id": 1,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10001",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 2,
    "country_iso": "US",
    "state_id": 2,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 2,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 2,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 2
    }
  },
  "ship_address": {
    "id": 2,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10002",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 2,
    "country_iso": "US",
    "state_id": 2,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 2,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 2,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 2
    }
  },
  "line_items": [
    {
      "id": 2,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 6,
      "vendor_id": 10,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "9.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 6,
        "name": "Product #3 - 711",
        "sku": "SKU-5",
        "is_master": false,
        "slug": "product-3-711",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 3,
            "name": "Size-3",
            "presentation": "S",
            "option_type_name": "foo-size-3",
            "option_type_id": 3,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 3,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #10",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [
        {
          "id": 1,
          "source_type": "Spree::PromotionAction",
          "source_id": 2,
          "adjustable_type": "Spree::LineItem",
          "adjustable_id": 2,
          "amount": "-1.0",
          "label": "Promotion (10% off)",
          "promotion_code_id": 2,
          "finalized": false,
          "eligible": true,
          "created_at": "2021-06-21T15:44:34.314-04:00",
          "updated_at": "2021-06-21T15:44:34.314-04:00",
          "display_amount": "-$1.00"
        }
      ]
    },
    {
      "id": 3,
      "quantity": 1,
      "price": "10.0",
      "variant_id": 8,
      "vendor_id": 10,
      "single_display_amount": "$10.00",
      "display_amount": "$10.00",
      "total": "9.0",
      "on_sale": false,
      "final_sale": false,
      "backordered": null,
      "promotionable": true,
      "variant": {
        "id": 8,
        "name": "Product #4 - 2878",
        "sku": "SKU-7",
        "is_master": false,
        "slug": "product-4-2878",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "10.0",
        "display_price": "$10.00",
        "options_text": "Size: S",
        "in_stock": true,
        "is_backorderable": true,
        "total_on_hand": 10,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 4,
            "name": "Size-4",
            "presentation": "S",
            "option_type_name": "foo-size-4",
            "option_type_id": 4,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "product_id": 4,
        "lead_time": 2,
        "brand": null,
        "brand_slug": null,
        "brand_description": null
      },
      "monogram": null,
      "gift_cards": [

      ],
      "vendor_name": "Vendor #10",
      "country_iso": "US",
      "domestic_override": false,
      "adjustments": [
        {
          "id": 2,
          "source_type": "Spree::PromotionAction",
          "source_id": 2,
          "adjustable_type": "Spree::LineItem",
          "adjustable_id": 3,
          "amount": "-1.0",
          "label": "Promotion (10% off)",
          "promotion_code_id": 2,
          "finalized": false,
          "eligible": true,
          "created_at": "2021-06-21T15:44:34.326-04:00",
          "updated_at": "2021-06-21T15:44:34.326-04:00",
          "display_amount": "-$1.00"
        }
      ]
    }
  ],
  "payments": [

  ],
  "shipments": [
    {
      "id": 2,
      "tracking": null,
      "tracking_url": null,
      "number": "H46115843317",
      "cost": "100.0",
      "shipped_at": null,
      "state": "pending",
      "order_id": "M411710480",
      "stock_location_name": "NY Warehouse 3",
      "giftwrappable": false,
      "stock_location_id": 3,
      "giftwrap": null,
      "shipping_rates": [
        {
          "id": 2,
          "name": "UPS Ground",
          "admin_name": null,
          "cost": "100.0",
          "selected": true,
          "shipping_method_id": 1,
          "shipping_method_code": "UPS_GROUND",
          "extra_cost": "+$100.00"
        }
      ],
      "selected_shipping_rate": {
        "id": 2,
        "name": "UPS Ground",
        "admin_name": null,
        "cost": "100.0",
        "selected": true,
        "shipping_method_id": 1,
        "shipping_method_code": "UPS_GROUND",
        "extra_cost": "+$100.00",
        "base_flat_rate_amount": 0.0
      },
      "shipping_methods": [
        {
          "id": 1,
          "code": "UPS_GROUND",
          "name": "UPS Ground",
          "zones": [
            {
              "id": 1,
              "name": "GlobalZone",
              "description": null
            }
          ],
          "shipping_categories": [
            {
              "id": 2,
              "name": "ShippingCategory #1"
            }
          ]
        }
      ],
      "manifest": [
        {
          "variant_id": 6,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        },
        {
          "variant_id": 8,
          "quantity": 1,
          "states": {
            "on_hand": 1
          }
        }
      ],
      "adjustments": [
        {
          "id": 4,
          "source_type": "Spree::PromotionAction",
          "source_id": 3,
          "adjustable_type": "Spree::Shipment",
          "adjustable_id": 2,
          "amount": "-10.0",
          "label": "Shipping",
          "promotion_code_id": null,
          "finalized": false,
          "eligible": true,
          "created_at": "2021-06-21T15:44:34.440-04:00",
          "updated_at": "2021-06-21T15:44:34.440-04:00",
          "display_amount": "-$10.00"
        },
        {
          "id": 3,
          "source_type": "Spree::PromotionAction",
          "source_id": 3,
          "adjustable_type": "Spree::Shipment",
          "adjustable_id": 2,
          "amount": "-9.99",
          "label": "Shipping",
          "promotion_code_id": null,
          "finalized": false,
          "eligible": true,
          "created_at": "2021-06-21T15:44:34.430-04:00",
          "updated_at": "2021-06-21T15:44:34.430-04:00",
          "display_amount": "-$9.99"
        }
      ],
      "stock_location_address": "NY Warehouse 3, Washington, AL",
      "country_iso": "US",
      "international_shipping": false,
      "delivery_estimation": "Jun 23",
      "estimated_giftwrap_price": "5.0",
      "display_estimated_giftwrap_price": "$5.00"
    }
  ],
  "adjustments": [
    {
      "id": 5,
      "source_type": "Spree::Promotion",
      "source_id": 3,
      "adjustable_type": "Spree::Order",
      "adjustable_id": 2,
      "amount": "20.0",
      "label": "adj1",
      "promotion_code_id": null,
      "finalized": false,
      "eligible": true,
      "created_at": "2021-06-21T15:44:34.447-04:00",
      "updated_at": "2021-06-21T15:44:34.447-04:00",
      "display_amount": "$20.00"
    },
    {
      "id": 6,
      "source_type": "Spree::Promotion",
      "source_id": 3,
      "adjustable_type": "Spree::Order",
      "adjustable_id": 2,
      "amount": "30.0",
      "label": "adj2",
      "promotion_code_id": null,
      "finalized": false,
      "eligible": true,
      "created_at": "2021-06-21T15:44:34.452-04:00",
      "updated_at": "2021-06-21T15:44:34.452-04:00",
      "display_amount": "$30.00"
    }
  ],
  "permissions": {
    "can_update": true
  },
  "gift_card_total": "0.0",
  "applied_promotion_codes": [
    {
      "id": 2,
      "promotion_id": 2,
      "value": "code1",
      "expires_at": null
    }
  ],
  "subtotals": {
    "order_total": "118.0",
    "item_total": "20.0",
    "shipments_total": "80.01",
    "line_item_promotion_totals": [
      {
        "source_id": 2,
        "label": "Promotion (10% off)",
        "total": "-2.0"
      }
    ],
    "tax_adjustments": [
      {
        "label": "VAT 5%",
        "amount": "1.8"
      }
    ],
    "miscellaneous_adjustments": [
      {
        "label": "adj1",
        "amount": "20.0"
      },
      {
        "label": "adj2",
        "amount": "30.0"
      }
    ],
    "giftwrap_amount": 0
  }
}
```



## it returns a 401


### Request

#### Endpoint

```plaintext
GET /api/orders/M540810462
Accept: application/json
Authorizat IO N: 6fe82646e70e04ae7188676ffb1c47690dd476aba09127a9
Host: example.org
Cookie: 
```

`GET /api/orders/:number`

#### Parameters



| Name | Description |
|:-----|:------------|
| number *required* | Specify the order number |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: 855660d3-fc31-463b-aeff-c9b5ef0699ee
X-Runtime: 0.011617
Vary: Origin
Content-Length: 58
401 Unauthorized
```


```json
{
  "error": "You are not authorized to perform that action."
}
```



# Passwords

Validate user email and password. Does not handle any session and only return the user

## Forgot Password


### Request

#### Endpoint

```plaintext
POST /api/users/password
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users/password`

#### Parameters


```json
user[email]=email75%40example.com
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json
Cache-Control: no-cache
X-Request-Id: 24b4f888-d81e-451c-8bf3-9cfea82019ca
X-Runtime: 0.003629
Vary: Origin
Content-Length: 0
200 OK
```




## Login


### Request

#### Endpoint

```plaintext
POST /api/users/login
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users/login`

#### Parameters


```json
user[email]=email73%40example.com&user[password]=secret
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |
| user[password] *required* | User password |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer 5f8ec31336cec1459464ffa6d2dfdbe2322489061c127ce1
ETag: W/&quot;528aa67fbcb30bb19f0a4b1f4426d5a2&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 97427329-4ccb-475f-822e-54169b104688
X-Runtime: 0.016526
Vary: Origin
Content-Length: 562
200 OK
```


```json
{
  "id": 73,
  "email": "email73@example.com",
  "persistence_token": null,
  "perishable_token": null,
  "last_request_at": null,
  "login": "email73@example.com",
  "ship_address_id": null,
  "bill_address_id": null,
  "created_at": "2021-06-21T15:45:01.120-04:00",
  "updated_at": "2021-06-21T15:45:01.122-04:00",
  "spree_api_key": "5f8ec31336cec1459464ffa6d2dfdbe2322489061c127ce1",
  "authentication_token": null,
  "deleted_at": null,
  "first_name": null,
  "last_name": null,
  "receive_emails_agree": false,
  "exemption_number": null,
  "vat_id": null,
  "avalara_entity_use_code_id": null,
  "default_payment_method_token": null
}
```



## Password Reset


### Request

#### Endpoint

```plaintext
PUT /api/users/password
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/users/password`

#### Parameters


```json
user[password]=password&user[password_confirmation]=password&user[reset_password_token]=123123123
```


| Name | Description |
|:-----|:------------|
| user[password] *required* | User password |
| user[password_confirmation] *required* | User password confirmation |
| user[reset_password_token] *required* | User reset password token |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 7e1e3a78-bdf2-4816-b17c-10bc53c1b089
X-Runtime: 0.023834
Vary: Origin
204 No Content
```




# Products

Get products info

## Fetch a single product by id


### Request

#### Endpoint

```plaintext
GET /api/products/product-57-2971
Host: example.org
Cookie: 
```

`GET /api/products/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Date: Mon, 21 Jun 2021 19:44:49 GMT
Surrogate-Control: max-age=900
Surrogate-Key: product_id=1
Content-Type: application/json; charset=utf-8
Cache-Control: max-age=900, public
ETag: W/&quot;da3d4b662fc70d6313cebbb86338e573&quot;
X-Request-Id: 69070a9a-967e-439a-8817-9f30dceb818e
X-Runtime: 0.072329
Vary: Origin
Content-Length: 1598
200 OK
```


```json
{
  "id": 57,
  "name": "Product #57 - 2971",
  "description": "As seen on TV!",
  "available_on": "2020-06-21T15:44:49.101-04:00",
  "slug": "product-57-2971",
  "meta_description": null,
  "meta_keywords": null,
  "taxon_ids": [
    16
  ],
  "total_on_hand": 0,
  "meta_title": null,
  "display_price": "$0.00",
  "brand": null,
  "brand_slug": null,
  "brand_url": null,
  "brand_description": null,
  "gift_card": false,
  "concierge_only": false,
  "is_registry": false,
  "discontinued": false,
  "available": true,
  "trends": [

  ],
  "breadcrumb_taxons": [
    {
      "id": 14,
      "name": "Clothing",
      "taxonomy_id": 6,
      "created_at": "2021-06-21T15:44:49.030-04:00",
      "url": "/category/clothing",
      "position": 1
    },
    {
      "id": 15,
      "name": "Girl",
      "taxonomy_id": 6,
      "created_at": "2021-06-21T15:44:49.053-04:00",
      "url": "/category/clothing/girl",
      "position": 2
    },
    {
      "id": 16,
      "name": "Dresses",
      "taxonomy_id": 6,
      "created_at": "2021-06-21T15:44:49.075-04:00",
      "url": "/category/clothing/girl/dresses",
      "position": 3
    }
  ],
  "has_variants": false,
  "master": {
    "id": 101,
    "name": "Product #57 - 2971",
    "sku": "SKU-101",
    "is_master": true,
    "slug": "product-57-2971",
    "description": "As seen on TV!",
    "track_inventory": true,
    "price": "19.99",
    "display_price": "$19.99",
    "options_text": "",
    "in_stock": false,
    "is_backorderable": false,
    "total_on_hand": 0,
    "is_destroyed": false,
    "option_values": [

    ],
    "images": [

    ],
    "videos": [

    ]
  },
  "variants": [

  ],
  "option_types": [

  ],
  "product_properties": [

  ],
  "classifications": [
    {
      "taxon_id": 16,
      "position": 1,
      "taxon": {
        "id": 16,
        "name": "Dresses",
        "pretty_name": "Category -> Clothing -> Girl -> Dresses",
        "permalink": "category/clothing/girl/dresses",
        "parent_id": 15,
        "taxonomy_id": 6,
        "url_override": null,
        "description": "Dresses",
        "icon": "/assets/default_taxon.png"
      }
    }
  ]
}
```



## Fetch all products


### Request

#### Endpoint

```plaintext
GET /api/products
Host: example.org
Cookie: 
```

`GET /api/products`

#### Parameters



| Name | Description |
|:-----|:------------|
| simple  | Any value passed here will trigger the simple view |
| ids  | Comma separated string of product ids |
| q[name_cont]  | Search by anything accessible through ransack |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Date: Mon, 21 Jun 2021 19:44:48 GMT
Surrogate-Control: max-age=900
Content-Type: application/json; charset=utf-8
Cache-Control: max-age=900, public
ETag: W/&quot;9325f1688e2ab6d5629a29cf65b6db85&quot;
X-Request-Id: b0690fa9-e0b4-44d5-9537-9f8009d9722c
X-Runtime: 0.072330
Vary: Origin
Content-Length: 1276
200 OK
```


```json
{
  "count": 1,
  "total_count": 1,
  "current_page": 1,
  "pages": 1,
  "per_page": 25,
  "products": [
    {
      "id": 51,
      "name": "Product #51 - 1670",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:47.870-04:00",
      "slug": "product-51-1670",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [
        8
      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": "Maison You",
      "brand_slug": "maison-you",
      "brand_url": "/brand/maison-you",
      "brand_description": "Maison You",
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 95,
        "name": "Product #51 - 1670",
        "sku": "SKU-95",
        "is_master": true,
        "slug": "product-51-1670",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [
        {
          "taxon_id": 8,
          "position": 1,
          "taxon": {
            "id": 8,
            "name": "Maison You",
            "pretty_name": "Brand -> Maison You",
            "permalink": "brand/maison-you",
            "parent_id": 7,
            "taxonomy_id": 3,
            "url_override": null,
            "description": "Maison You",
            "icon": "/assets/default_taxon.png"
          }
        }
      ]
    }
  ]
}
```



## Fetch all products, simple view


### Request

#### Endpoint

```plaintext
GET /api/products?simple=true
Host: example.org
Cookie: 
```

`GET /api/products`

#### Parameters


```json
simple: true
```


| Name | Description |
|:-----|:------------|
| simple  | Any value passed here will trigger the simple view |
| ids  | Comma separated string of product ids |
| q[name_cont]  | Search by anything accessible through ransack |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Date: Mon, 21 Jun 2021 19:44:48 GMT
Surrogate-Control: max-age=900
Content-Type: application/json; charset=utf-8
Cache-Control: max-age=900, public
ETag: W/&quot;eb5f5d585ea2b86f365aa136b22479e2&quot;
X-Request-Id: 587df9cf-6925-4550-ac84-4bffa07f482f
X-Runtime: 0.054107
Vary: Origin
Content-Length: 406
200 OK
```


```json
{
  "count": 1,
  "total_count": 1,
  "current_page": 1,
  "pages": 1,
  "per_page": 25,
  "products": [
    {
      "id": 52,
      "name": "Product #52 - 7982",
      "slug": "product-52-7982",
      "master_id": 96,
      "display_price": "$0.00",
      "brand": "Maison You",
      "brand_slug": "maison-you",
      "brand_url": "/brand/maison-you",
      "brand_description": "Maison You",
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "images": [

      ]
    }
  ]
}
```



## Fetch multiple products by id


### Request

#### Endpoint

```plaintext
GET /api/products?ids=54%2C55%2C56
Host: example.org
Cookie: 
```

`GET /api/products`

#### Parameters


```json
ids: 54,55,56
```


| Name | Description |
|:-----|:------------|
| simple  | Any value passed here will trigger the simple view |
| ids  | Comma separated string of product ids |
| q[name_cont]  | Search by anything accessible through ransack |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Date: Mon, 21 Jun 2021 19:44:48 GMT
Surrogate-Control: max-age=900
Content-Type: application/json; charset=utf-8
Cache-Control: max-age=900, public
ETag: W/&quot;24caae5194b0d72c8175f81e38896fab&quot;
X-Request-Id: 8af4c3ed-1dd4-42c3-87d4-f261aee51bc6
X-Runtime: 0.119262
Vary: Origin
Content-Length: 2800
200 OK
```


```json
{
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25,
  "products": [
    {
      "id": 54,
      "name": "Product #54 - 6999",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:48.616-04:00",
      "slug": "product-54-6999",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [

      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": null,
      "brand_slug": null,
      "brand_url": null,
      "brand_description": null,
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 98,
        "name": "Product #54 - 6999",
        "sku": "SKU-98",
        "is_master": true,
        "slug": "product-54-6999",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [

      ]
    },
    {
      "id": 55,
      "name": "Product #55 - 764",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:48.713-04:00",
      "slug": "product-55-764",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [

      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": null,
      "brand_slug": null,
      "brand_url": null,
      "brand_description": null,
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 99,
        "name": "Product #55 - 764",
        "sku": "SKU-99",
        "is_master": true,
        "slug": "product-55-764",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [

      ]
    },
    {
      "id": 56,
      "name": "Product #56 - 2974",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:48.800-04:00",
      "slug": "product-56-2974",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [

      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": null,
      "brand_slug": null,
      "brand_url": null,
      "brand_description": null,
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 100,
        "name": "Product #56 - 2974",
        "sku": "SKU-100",
        "is_master": true,
        "slug": "product-56-2974",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [

      ]
    }
  ]
}
```



## Fetch products by taxon id


### Request

#### Endpoint

```plaintext
GET /api/taxons/products?id=6
Host: example.org
Cookie: 
```

`GET /api/taxons/products`

#### Parameters


```json
id: 6
```


| Name | Description |
|:-----|:------------|
| permalink  |  permalink |
| id  |  id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;a7965f33e62b06b18b9a0d35c6fda67e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 660f7b24-0309-4573-8e81-ad78f8d0d5cc
X-Runtime: 0.058119
Vary: Origin
Content-Length: 1304
200 OK
```


```json
{
  "count": 1,
  "total_count": 1,
  "current_page": 1,
  "pages": 1,
  "per_page": 500,
  "products": [
    {
      "id": 50,
      "name": "Product #50 - 6026",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:47.662-04:00",
      "slug": "product-50-6026",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [
        6
      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": "Ruby on Rails - 2",
      "brand_slug": "ruby-on-rails-2",
      "brand_url": "/ruby-on-rails-2",
      "brand_description": "Ruby on Rails - 2",
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 94,
        "name": "Product #50 - 6026",
        "sku": "SKU-94",
        "is_master": true,
        "slug": "product-50-6026",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [
        {
          "taxon_id": 6,
          "position": 1,
          "taxon": {
            "id": 6,
            "name": "Ruby on Rails - 2",
            "pretty_name": "Ruby on Rails - 2",
            "permalink": "ruby-on-rails-2",
            "parent_id": null,
            "taxonomy_id": 2,
            "url_override": null,
            "description": "Ruby on Rails - 2",
            "icon": "/assets/default_taxon.png"
          }
        }
      ]
    }
  ]
}
```



## Fetch products by taxon permalink


### Request

#### Endpoint

```plaintext
GET /api/taxons/products?permalink=ruby-on-rails-1
Host: example.org
Cookie: 
```

`GET /api/taxons/products`

#### Parameters


```json
permalink: ruby-on-rails-1
```


| Name | Description |
|:-----|:------------|
| permalink  |  permalink |
| id  |  id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;daa857b06406387a65dc31202cdfe34a&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 14b4e9bf-0b82-4259-88de-3cb40693604b
X-Runtime: 0.078528
Vary: Origin
Content-Length: 1304
200 OK
```


```json
{
  "count": 1,
  "total_count": 1,
  "current_page": 1,
  "pages": 1,
  "per_page": 500,
  "products": [
    {
      "id": 48,
      "name": "Product #48 - 5869",
      "description": "As seen on TV!",
      "available_on": "2020-06-21T15:44:47.250-04:00",
      "slug": "product-48-5869",
      "meta_description": null,
      "meta_keywords": null,
      "taxon_ids": [
        3
      ],
      "total_on_hand": 0,
      "meta_title": null,
      "display_price": "$0.00",
      "brand": "Ruby on Rails - 1",
      "brand_slug": "ruby-on-rails-1",
      "brand_url": "/ruby-on-rails-1",
      "brand_description": "Ruby on Rails - 1",
      "gift_card": false,
      "concierge_only": false,
      "is_registry": false,
      "discontinued": false,
      "available": true,
      "trends": [

      ],
      "breadcrumb_taxons": [

      ],
      "has_variants": false,
      "master": {
        "id": 92,
        "name": "Product #48 - 5869",
        "sku": "SKU-92",
        "is_master": true,
        "slug": "product-48-5869",
        "description": "As seen on TV!",
        "track_inventory": true,
        "price": "19.99",
        "display_price": "$19.99",
        "options_text": "",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [

        ],
        "images": [

        ],
        "videos": [

        ]
      },
      "variants": [

      ],
      "option_types": [

      ],
      "product_properties": [

      ],
      "classifications": [
        {
          "taxon_id": 3,
          "position": 1,
          "taxon": {
            "id": 3,
            "name": "Ruby on Rails - 1",
            "pretty_name": "Ruby on Rails - 1",
            "permalink": "ruby-on-rails-1",
            "parent_id": null,
            "taxonomy_id": 1,
            "url_override": null,
            "description": "Ruby on Rails - 1",
            "icon": "/assets/default_taxon.png"
          }
        }
      ]
    }
  ]
}
```



## Get all products info


### Request

#### Endpoint

```plaintext
GET /api/sitemap/products
Accept: application/json
Authorizat IO N: Bearer fab6c66e0c603a41e798d13a832195a42f1f0bc4d71f84f2
Host: example.org
Cookie: 
```

`GET /api/sitemap/products`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;4f53cda18c2baa0c0354bb5f9a3ecbe5&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 6e0b420a-96b6-41f8-89d3-85ca79e54fda
X-Runtime: 0.037537
Vary: Origin
Content-Length: 2
200 OK
```


```json
[

]
```



## Product not found


### Request

#### Endpoint

```plaintext
GET /api/products/invalid
Host: example.org
Cookie: 
```

`GET /api/products/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: c33c30b1-5fcf-4991-b75f-fa6e097641c4
X-Runtime: 0.050529
Vary: Origin
Content-Length: 65
404 Not Found
```


```json
{
  "error": "The resource you were looking for could not be found."
}
```



# Recently Viewed Products

Get all recently viewed products using a session_id

## Get all recently viewed products


### Request

#### Endpoint

```plaintext
GET /api/recently_viewed?recently_viewed[session_id]=o1eg9j2zs33gghdh6eersobw1jzyb14zxsf50uuw09svfb960pb6j6rmsxqbhd967jkb06nqbkk96oxyyz7hu8jxyp1hd2il0i70x09sdqpidzq1cvzgk408o25g91zetupsssa1836hbr5tc8dn3t2dzgws1wvwqn10va32l0n9hg04mlyce9ncnfj5a4ilwbcq0ybowd6053b28fmmezxij3lpnr0q1tbv78wddieebe80fbu6mrnl7vdvqkp
Accept: application/json
Authorizat IO N: Bearer 399ecf24f123fd5fd2eb0f30aecdc3b2a8da476735d928f2
Host: example.org
Cookie: 
```

`GET /api/recently_viewed`

#### Parameters


```json
recently_viewed: {&quot;session_id&quot;=&gt;&quot;o1eg9j2zs33gghdh6eersobw1jzyb14zxsf50uuw09svfb960pb6j6rmsxqbhd967jkb06nqbkk96oxyyz7hu8jxyp1hd2il0i70x09sdqpidzq1cvzgk408o25g91zetupsssa1836hbr5tc8dn3t2dzgws1wvwqn10va32l0n9hg04mlyce9ncnfj5a4ilwbcq0ybowd6053b28fmmezxij3lpnr0q1tbv78wddieebe80fbu6mrnl7vdvqkp&quot;}
```


| Name | Description |
|:-----|:------------|
| recently_viewed[session_id]  | A session id is required unless providing an Auth token |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bee1cc49200717e8095db3a67c4183f4&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 76970c59-2f02-4d72-8503-1488314db7b5
X-Runtime: 0.027159
Vary: Origin
Content-Length: 119
200 OK
```


```json
[
  {
    "at": "2021-06-21T15:45:05.467-04:00",
    "variant_id": "var1"
  },
  {
    "at": "2021-06-21T15:50:05.467-04:00",
    "variant_id": "var2"
  }
]
```



## Store a recently viewed variant


### Request

#### Endpoint

```plaintext
POST /api/recently_viewed
Accept: application/json
Authorizat IO N: Bearer e6a5200605b7edfcff49d01c6726e062998fb4c5e3463228
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/recently_viewed`

#### Parameters


```json
recently_viewed[session_id]=l0s54s7ccxcl22g2wmzmhqbfg8g556l7dr1i6ntj4ip9dwu2c3roh2yxmslu649znw4ehxasecuw61tworh93cax0670pzgojxbk6kwzxyi9q6p39q2t997rcqs9dh17pmrpgsuwtqq6nagkarwxbkgnw2ejtwa9z451agh1pcwd7rnofpkbx3d3jaq0n9pi5uodj7x9b6xohijashetcc9f0xsbfww7t7s5akk5kh5cw3w9ng16jy1picuvawo&recently_viewed[variant_id]=foo
```


| Name | Description |
|:-----|:------------|
| recently_viewed[session_id]  | Either a logged in user or a session id are required |
| recently_viewed[variant_id] *required* | Recently viewed variant |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: fd58ac22-da82-4b18-be33-2e50597bba91
X-Runtime: 0.005660
Vary: Origin
204 No Content
```




# Return Authorizations

Get user return authorizations

## Can get another user&#39;s return authorization


### Request

#### Endpoint

```plaintext
GET /api/returns/RA813254566
Authorizat IO N: Bearer 9b765be9dbdaff55f073db2e696f77afbe59c61c63eaa060
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/returns/:number`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;d9f3979035dd5889441d9f4fa1e07b3f&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 2b269cf8-065f-45e5-bb99-ccc4f140d34c
X-Runtime: 0.050336
Vary: Origin
Content-Length: 3115
200 OK
```


```json
{
  "id": 4,
  "number": "RA813254566",
  "state": "authorized",
  "order_id": 36,
  "memo": "Items were broken",
  "created_at": "2021-06-21T15:45:07.356-04:00",
  "updated_at": "2021-06-21T15:45:07.356-04:00",
  "amount": "10.0",
  "reason": {
    "id": 6,
    "name": "Defect #5",
    "active": true,
    "mutable": true,
    "created_at": "2021-06-21T15:45:07.348-04:00",
    "updated_at": "2021-06-21T15:45:07.348-04:00",
    "mirakl_code": null
  },
  "order": {
    "id": 36,
    "number": "M308498349",
    "item_total": "10.0",
    "total": "110.0",
    "state": "complete",
    "adjustment_total": "0.0",
    "user_id": 96,
    "completed_at": "2021-06-21T15:45:07.237-04:00",
    "bill_address_id": 62,
    "ship_address_id": 63,
    "payment_total": "110.0",
    "shipment_state": "shipped",
    "payment_state": "paid",
    "email": "email96@example.com",
    "special_instructions": null,
    "created_at": "2021-06-21T15:45:07.135-04:00",
    "updated_at": "2021-06-21T15:45:07.397-04:00",
    "currency": "USD",
    "last_ip_address": null,
    "created_by_id": null,
    "shipment_total": "100.0",
    "additional_tax_total": "0.0",
    "promo_total": "0.0",
    "channel": "spree",
    "included_tax_total": "0.0",
    "item_count": 1,
    "approver_id": null,
    "approved_at": null,
    "confirmation_delivered": false,
    "guest_token": "eqDKhtR8-3kbQDNFScC3kQ",
    "canceled_at": null,
    "canceler_id": null,
    "store_id": 35,
    "approver_name": null,
    "frontend_viewable": true,
    "migrated": false,
    "is_gift": false,
    "gift_email": null,
    "gift_message": null,
    "gift_card_total": "0.0",
    "gift_confirmation_delivered_at": null,
    "use_store_credits": false,
    "first_order": false,
    "maisonette_customer_id": "586aa799-3292-4254-be0c-5d1c1ecaace9"
  },
  "ship_address": {
    "id": 63,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10062",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 50,
    "country_iso": "US",
    "state_id": 50,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 50,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 50,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 50
    }
  },
  "bill_address": {
    "id": 62,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10061",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 50,
    "country_iso": "US",
    "state_id": 50,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 50,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 50,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 50
    }
  },
  "return_items": [
    {
      "name": "Product #88 - 1445",
      "brand": null,
      "brand_slug": null,
      "image": null,
      "product_slug": "product-88-1445",
      "cost": "10.0",
      "option_values": [
        {
          "type": "Size",
          "value": "S"
        }
      ]
    }
  ],
  "payments": [
    {
      "payment_method": {
        "id": 18,
        "name": "Credit Card"
      },
      "source": {
        "id": 5,
        "month": "12",
        "year": "2022",
        "cc_type": null,
        "last_digits": "1111",
        "name": "Spree Commerce",
        "gateway_customer_profile_id": "BGS-334241",
        "gateway_payment_profile_id": null
      }
    }
  ],
  "refunded_total": "0.0",
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## Gets the user&#39;s return authorizations


### Request

#### Endpoint

```plaintext
GET /api/returns/mine
Authorizat IO N: Bearer dcc4138d1a2e74f950865b003914f488105faf7734d825ca
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/returns/mine`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;ff33fdb52756ca1c0290ea23d0425a7b&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 591b0b01-9b23-41e9-ae9a-c873c4d150fc
X-Runtime: 0.019174
Vary: Origin
Content-Length: 169
200 OK
```


```json
{
  "return_authorizations": [
    {
      "number": "RA241668572",
      "created_at": "2021-06-21T15:45:06.067-04:00",
      "return_amount": "10.0",
      "order_number": "M705359781",
      "state": "authorized"
    }
  ]
}
```



## returns a 200


### Request

#### Endpoint

```plaintext
GET /api/returns/RA726161001
Authorizat IO N: Bearer 0c3d3932f63c20e385d540c13ccbb12fcdd78981cb09c477
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/returns/:number`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;9bf6e00fffbb7849cdcf47322ac1dd76&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ab75d5fb-0c36-490a-aa1a-e3067ba19f6a
X-Runtime: 0.057795
Vary: Origin
Content-Length: 3038
200 OK
```


```json
{
  "id": 3,
  "number": "RA726161001",
  "state": "authorized",
  "order_id": 35,
  "memo": "Items were broken",
  "created_at": "2021-06-21T15:45:06.668-04:00",
  "updated_at": "2021-06-21T15:45:06.668-04:00",
  "amount": "10.0",
  "reason": {
    "id": 4,
    "name": "Defect #3",
    "active": true,
    "mutable": true,
    "created_at": "2021-06-21T15:45:06.659-04:00",
    "updated_at": "2021-06-21T15:45:06.659-04:00",
    "mirakl_code": null
  },
  "order": {
    "id": 35,
    "number": "M953082380",
    "item_total": "10.0",
    "total": "110.0",
    "state": "complete",
    "adjustment_total": "0.0",
    "user_id": 95,
    "completed_at": "2021-06-21T15:45:06.558-04:00",
    "bill_address_id": 60,
    "ship_address_id": 61,
    "payment_total": "110.0",
    "shipment_state": "shipped",
    "payment_state": "paid",
    "email": "email95@example.com",
    "special_instructions": null,
    "created_at": "2021-06-21T15:45:06.435-04:00",
    "updated_at": "2021-06-21T15:45:06.712-04:00",
    "currency": "USD",
    "last_ip_address": null,
    "created_by_id": null,
    "shipment_total": "100.0",
    "additional_tax_total": "0.0",
    "promo_total": "0.0",
    "channel": "spree",
    "included_tax_total": "0.0",
    "item_count": 1,
    "approver_id": null,
    "approved_at": null,
    "confirmation_delivered": false,
    "guest_token": "cBJ6AxiVFbIk4adKEQ6_Kw",
    "canceled_at": null,
    "canceler_id": null,
    "store_id": 34,
    "approver_name": null,
    "frontend_viewable": true,
    "migrated": false,
    "is_gift": false,
    "gift_email": null,
    "gift_message": null,
    "gift_card_total": "0.0",
    "gift_confirmation_delivered_at": null,
    "use_store_credits": false,
    "first_order": false,
    "maisonette_customer_id": "6fb2021b-81f5-4959-a3ee-44feb1a1ce73"
  },
  "ship_address": {
    "id": 61,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "A Different Road",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10060",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 49,
    "country_iso": "US",
    "state_id": 49,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 49,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 49,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 49
    }
  },
  "bill_address": {
    "id": 60,
    "firstname": "John",
    "lastname": "Smith",
    "full_name": "John Smith",
    "address1": "PO Box 1337",
    "address2": "Northwest",
    "city": "Herndon",
    "zipcode": "10059",
    "phone": "555-555-0199",
    "company": "Company",
    "alternative_phone": "555-555-0199",
    "country_id": 49,
    "country_iso": "US",
    "state_id": 49,
    "state_name": null,
    "state_text": "AL",
    "country": {
      "id": 49,
      "iso_name": "UNITED STATES",
      "iso": "US",
      "iso3": "USA",
      "name": "United States",
      "numcode": 840
    },
    "state": {
      "id": 49,
      "name": "Alabama",
      "abbr": "AL",
      "country_id": 49
    }
  },
  "return_items": [
    {
      "name": "Product #87 - 2468",
      "brand": null,
      "brand_slug": null,
      "image": null,
      "product_slug": "product-87-2468",
      "cost": "10.0",
      "option_values": [
        {
          "type": "Size",
          "value": "S"
        }
      ]
    }
  ],
  "payments": [
    {
      "payment_method": {
        "id": 16,
        "name": "Credit Card"
      },
      "source": {
        "id": 4,
        "month": "12",
        "year": "2022",
        "cc_type": null,
        "last_digits": "1111",
        "name": "Spree Commerce"
      }
    }
  ],
  "refunded_total": "0.0",
  "subtotals": {
    "order_total": "110.0",
    "item_total": "10.0",
    "shipments_total": "100.0",
    "line_item_promotion_totals": [

    ],
    "tax_adjustments": [

    ],
    "miscellaneous_adjustments": [

    ],
    "giftwrap_amount": 0
  }
}
```



## returns a 404


### Request

#### Endpoint

```plaintext
GET /api/returns/RA316161271
Authorizat IO N: Bearer 3afa3db1860f92ac5b90e0db9a268f363ad7ec1b532cd6bf
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/returns/:number`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: 9a5194a8-593f-47d1-95e4-65c13ec18a7f
X-Runtime: 0.013433
Vary: Origin
Content-Length: 65
404 Not Found
```


```json
{
  "error": "The resource you were looking for could not be found."
}
```



# Stock Requests

Create a new stock request, accessible without an api key

## Create a stock request


### Request

#### Endpoint

```plaintext
POST /api/stock_requests
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/stock_requests`

#### Parameters


```json
stock_request[email]=anton.bashirian%40roobullrich.ca&stock_request[variant_id]=115
```


| Name | Description |
|:-----|:------------|
| stock_request[email] *required* | Stock request email |
| stock_request[variant_id] *required* | Stock request variant |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json
Cache-Control: no-cache
X-Request-Id: 9e460b49-9af9-4b69-b9c2-e7ed58233133
X-Runtime: 0.008942
Vary: Origin
Content-Length: 0
201 Created
```




## With a bad email


### Request

#### Endpoint

```plaintext
POST /api/stock_requests
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/stock_requests`

#### Parameters


```json
stock_request[email]=foo&stock_request[variant_id]=117
```


| Name | Description |
|:-----|:------------|
| stock_request[email] *required* | Stock request email |
| stock_request[variant_id] *required* | Stock request variant |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: 23575e05-1bc6-45a7-90bb-8bfcef184254
X-Runtime: 0.006607
Vary: Origin
Content-Length: 48
422 Unprocessable Entity
```


```json
{
  "success": false,
  "message": [
    "Email is invalid"
  ]
}
```



## With a duplicate email and product


### Request

#### Endpoint

```plaintext
POST /api/stock_requests
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/stock_requests`

#### Parameters


```json
stock_request[email]=sherell%40sanford.co.uk&stock_request[variant_id]=113
```


| Name | Description |
|:-----|:------------|
| stock_request[email] *required* | Stock request email |
| stock_request[variant_id] *required* | Stock request variant |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Cache-Control: no-cache
X-Request-Id: db111014-5c03-4fe1-9155-9a87959f8352
X-Runtime: 0.026117
Vary: Origin
Content-Length: 80
422 Unprocessable Entity
```


```json
{
  "success": false,
  "message": "Email is already on the waitlist for this product."
}
```



# Store Credits API

Get user store_credits and current account balance for the current user

## returns a 200


### Request

#### Endpoint

```plaintext
GET api/store_credits/mine
Authorizat IO N: Bearer f8b0140521fbf8297978fea3e67a73452f408c810dd05a43
Accept: application/json
Host: example.org
Cookie: 
```

`GET api/store_credits/mine`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;3a870ef9904d13a404627d9a1e936a7b&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 42e3e9f7-a4db-47c2-8428-c0f4e3390d81
X-Runtime: 0.039916
Vary: Origin
Content-Length: 218
200 OK
```


```json
{
  "store_credits": [
    {
      "amount": "150.0",
      "amount_used": "0.0",
      "category": "Exchange",
      "created_at": "2021-06-21T15:44:49.397-04:00"
    }
  ],
  "current_balance": "150.0",
  "count": 1,
  "total_count": 1,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



# Subscribers

Update a subscriber. Users can update their own subscriber, admins can update minis for others.

## Create a subscriber


### Request

#### Endpoint

```plaintext
POST /api/subscribers
Accept: application/json
Authorizat IO N: Bearer 
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/subscribers`

#### Parameters


```json
subscriber[email]=delois%40kertzmann.ca&subscriber[first_name]=Tennie&subscriber[last_name]=Stanton&subscriber[source]=Dolor+modi+officiis+eaque+velit+aliquid+repellendus+exercitationem.&subscriber[list_id]=tmsi9l
```


| Name | Description |
|:-----|:------------|
| subscriber[email] *required* | Subscriber email |
| subscriber[first_name]  | Subscriber first name |
| subscriber[last_name]  | Subscriber last name |
| subscriber[source]  | Subscriber source |
| subscriber[list_id]  | If not provided, spree will use the default Klaviyo list id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;bfd664acaf8a5ebd7e8ecc633b06da4a&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 8466c639-a0de-4421-b7c6-e2efcc37900e
X-Runtime: 0.011967
Vary: Origin
Content-Length: 275
201 Created
```


```json
{
  "id": 2,
  "user_id": null,
  "list_id": "tmsi9l",
  "email": "delois@kertzmann.ca",
  "first_name": "Tennie",
  "last_name": "Stanton",
  "source": "Dolor modi officiis eaque velit aliquid repellendus exercitationem.",
  "phone": null,
  "status": "subscribed",
  "created_at": "2021-06-21T15:44:49.535-04:00"
}
```



## Create a subscriber for the associated user


### Request

#### Endpoint

```plaintext
POST /api/subscribers
Accept: application/json
Authorizat IO N: Bearer 50c73b6590fe70c3dce4d390998f952b16c98d361a0214f8
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/subscribers`

#### Parameters


```json
subscriber[email]&subscriber[first_name]=Melvina&subscriber[last_name]=Bergnaum&subscriber[source]=Explicabo+quibusdam+eveniet+et+aliquam+sit+sequi+ex.&subscriber[list_id]=lel6dt
```


| Name | Description |
|:-----|:------------|
| subscriber[email] *required* | Subscriber email |
| subscriber[first_name]  | Subscriber first name |
| subscriber[last_name]  | Subscriber last name |
| subscriber[source]  | Subscriber source |
| subscriber[list_id]  | If not provided, spree will use the default Klaviyo list id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;7e00b4885da069e4d3a9c61b6d52a373&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 096fd102-f395-4eaf-8590-28afb96c60e5
X-Runtime: 0.013158
Vary: Origin
Content-Length: 260
201 Created
```


```json
{
  "id": 3,
  "user_id": 50,
  "list_id": "lel6dt",
  "email": "email50@example.com",
  "first_name": "Melvina",
  "last_name": "Bergnaum",
  "source": "Explicabo quibusdam eveniet et aliquam sit sequi ex.",
  "phone": null,
  "status": "subscribed",
  "created_at": "2021-06-21T15:44:49.563-04:00"
}
```



## Get all subscribers


### Request

#### Endpoint

```plaintext
GET /api/subscribers
Accept: application/json
Authorizat IO N: Bearer 48bbd4e135cfcad6e9192fd45c67a671f83da98e46c17188
Host: example.org
Cookie: 
```

`GET /api/subscribers`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[user_id_eq]  | Anything accessible by ransack can be passed in as query params |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;96bc6c338caddc8af2d828cfdefbfcd9&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 2d005055-cace-4d8f-8cce-be0068ee2143
X-Runtime: 0.015559
Vary: Origin
Content-Length: 772
200 OK
```


```json
{
  "subscribers": [
    {
      "id": 5,
      "user_id": null,
      "list_id": "r7sgt5",
      "email": "monica@botsford.ca",
      "first_name": "Mauricio",
      "last_name": "Lemke",
      "source": "Registration",
      "phone": null,
      "status": "subscribed",
      "created_at": "2021-06-21T15:44:49.626-04:00"
    },
    {
      "id": 6,
      "user_id": null,
      "list_id": "ppw5lt",
      "email": "mitzie_braun@wiegandbernhard.com",
      "first_name": "Anderson",
      "last_name": "Kling",
      "source": "Registration",
      "phone": null,
      "status": "subscribed",
      "created_at": "2021-06-21T15:44:49.630-04:00"
    },
    {
      "id": 7,
      "user_id": null,
      "list_id": "dm3dku",
      "email": "livia.kuvalis@mclaughlinschuster.ca",
      "first_name": "Sherie",
      "last_name": "Batz",
      "source": "Registration",
      "phone": null,
      "status": "subscribed",
      "created_at": "2021-06-21T15:44:49.634-04:00"
    }
  ],
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Update a subscriber


### Request

#### Endpoint

```plaintext
PATCH /api/subscribers/1
Accept: application/json
Authorizat IO N: Bearer d26d3c7497a7aa520fc82691aa7bff6e4aae603184306fca
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/subscribers/:id`

#### Parameters


```json
subscriber[source]=Nobis+voluptatem+voluptatibus+accusamus+accusantium+consectetur+aut.
```


| Name | Description |
|:-----|:------------|
| subscriber[email] *required* | Subscriber email |
| subscriber[first_name]  | Subscriber first name |
| subscriber[last_name]  | Subscriber last name |
| subscriber[source]  | Subscriber source |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;f8d6736409fbf70557ac53460ef9dc6e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 3933c3f4-daf5-4e2a-9f15-6bdec7784058
X-Runtime: 0.039558
Vary: Origin
Content-Length: 285
200 OK
```


```json
{
  "id": 1,
  "user_id": 49,
  "list_id": "ebm4bw",
  "email": "email49@example.com",
  "first_name": "Rickey",
  "last_name": "McClure",
  "source": "Nobis voluptatem voluptatibus accusamus accusantium consectetur aut.",
  "phone": null,
  "status": "subscribed_and_synced",
  "created_at": "2021-06-21T15:44:49.478-04:00"
}
```



## unsubscribe a known subscriber


### Request

#### Endpoint

```plaintext
DELETE /api/subscribers
Accept: application/json
Authorizat IO N: Bearer 28c24a74455397f52c27e6e05f2940b0ddf946e5b09cc88d
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/subscribers`

#### Parameters


```json
subscriber[email]=email51%40example.com&subscriber[list_id]=wu3j9k
```


| Name | Description |
|:-----|:------------|
| subscriber[email]  | Subscriber email |
| subscriber[list_id]  | If not provided, spree will use the default Klaviyo list id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json
Cache-Control: no-cache
X-Request-Id: 70ed748a-32db-4515-9afd-7260a1ad32b2
X-Runtime: 0.010714
Vary: Origin
Content-Length: 0
200 OK
```




## unsubscribe an email that doesn&#39;t exist


### Request

#### Endpoint

```plaintext
DELETE /api/subscribers
Accept: application/json
Authorizat IO N: Bearer 2564c446e80137981a661d9e6d7ac47a8297eca1d7676b53
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/subscribers`

#### Parameters


```json
subscriber[email]=arline%40grimes.info&subscriber[list_id]=774ing
```


| Name | Description |
|:-----|:------------|
| subscriber[email]  | Subscriber email |
| subscriber[list_id]  | If not provided, spree will use the default Klaviyo list id |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 07d2be9c-7385-442a-b3f4-67007861e03e
X-Runtime: 0.005650
Vary: Origin
204 No Content
```




# Taxons

Get taxons info

## Get all taxons info


### Request

#### Endpoint

```plaintext
GET /api/sitemap/taxons
Accept: application/json
Authorizat IO N: Bearer 490cdb1b1d8bfe5baf7c5ad41efa0c8169bff142f1fb22dd
Host: example.org
Cookie: 
```

`GET /api/sitemap/taxons`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;4f53cda18c2baa0c0354bb5f9a3ecbe5&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 1786f29c-f227-4a1e-bbd6-f87348bacc9b
X-Runtime: 0.031659
Vary: Origin
Content-Length: 2
200 OK
```


```json
[

]
```



# Taxons API

Return all brand taxons that have products in stock

## Get all taxons


### Request

#### Endpoint

```plaintext
GET /api/taxons
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons`

#### Parameters



| Name | Description |
|:-----|:------------|
| without_children  | Use this parameter to disable returning descendant taxons |
| q[purchasable_brands]  | Use this parameter to only return brands with purchasable products |
| q[taxonomy_name_eq]  | Optional parameter to filter by taxonomy name |
| q[name_eq]  | Use this parameter to query taxons by name |
| q[permalink_eq]  | Use this parameter to query taxons by permalink |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;59dc875423b229c0ae6a4ff6053ed8b3&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 4b90474a-208e-4bb6-98c6-5af2483443de
X-Runtime: 0.046199
Vary: Origin
Content-Length: 4443
200 OK
```


```json
{
  "count": 11,
  "total_count": 11,
  "current_page": 1,
  "pages": 1,
  "per_page": 500,
  "taxons": [
    {
      "id": 21,
      "name": "Category",
      "pretty_name": "Category",
      "permalink": "category",
      "parent_id": null,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Category",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 22,
          "name": "Kids",
          "pretty_name": "Category -> Kids",
          "permalink": "category/kids",
          "parent_id": 21,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 22,
      "name": "Kids",
      "pretty_name": "Category -> Kids",
      "permalink": "category/kids",
      "parent_id": 21,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Kids",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 23,
          "name": "Boys",
          "pretty_name": "Category -> Kids -> Boys",
          "permalink": "category/kids/boys",
          "parent_id": 22,
          "taxonomy_id": 9,
          "url_override": null
        },
        {
          "id": 26,
          "name": "Girls",
          "pretty_name": "Category -> Kids -> Girls",
          "permalink": "category/kids/girls",
          "parent_id": 22,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 23,
      "name": "Boys",
      "pretty_name": "Category -> Kids -> Boys",
      "permalink": "category/kids/boys",
      "parent_id": 22,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Boys",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 24,
          "name": "Boys Tops",
          "pretty_name": "Category -> Kids -> Boys -> Boys Tops",
          "permalink": "category/kids/boys/boys-tops",
          "parent_id": 23,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 24,
      "name": "Boys Tops",
      "pretty_name": "Category -> Kids -> Boys -> Boys Tops",
      "permalink": "category/kids/boys/boys-tops",
      "parent_id": 23,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Boys Tops",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 25,
          "name": "Boys Shirts",
          "pretty_name": "Category -> Kids -> Boys -> Boys Tops -> Boys Shirts",
          "permalink": "category/kids/boys/boys-tops/boys-shirts",
          "parent_id": 24,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 25,
      "name": "Boys Shirts",
      "pretty_name": "Category -> Kids -> Boys -> Boys Tops -> Boys Shirts",
      "permalink": "category/kids/boys/boys-tops/boys-shirts",
      "parent_id": 24,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Boys Shirts",
      "icon": "/assets/default_taxon.png",
      "taxons": [

      ]
    },
    {
      "id": 26,
      "name": "Girls",
      "pretty_name": "Category -> Kids -> Girls",
      "permalink": "category/kids/girls",
      "parent_id": 22,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Girls",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 27,
          "name": "Girls Tops",
          "pretty_name": "Category -> Kids -> Girls -> Girls Tops",
          "permalink": "category/kids/girls/girls-tops",
          "parent_id": 26,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 27,
      "name": "Girls Tops",
      "pretty_name": "Category -> Kids -> Girls -> Girls Tops",
      "permalink": "category/kids/girls/girls-tops",
      "parent_id": 26,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Girls Tops",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 28,
          "name": "Girls Shirts",
          "pretty_name": "Category -> Kids -> Girls -> Girls Tops -> Girls Shirts",
          "permalink": "category/kids/girls/girls-tops/girls-shirts",
          "parent_id": 27,
          "taxonomy_id": 9,
          "url_override": null
        }
      ]
    },
    {
      "id": 28,
      "name": "Girls Shirts",
      "pretty_name": "Category -> Kids -> Girls -> Girls Tops -> Girls Shirts",
      "permalink": "category/kids/girls/girls-tops/girls-shirts",
      "parent_id": 27,
      "taxonomy_id": 9,
      "url_override": null,
      "description": "Girls Shirts",
      "icon": "/assets/default_taxon.png",
      "taxons": [

      ]
    },
    {
      "id": 29,
      "name": "Brand",
      "pretty_name": "Brand",
      "permalink": "brand",
      "parent_id": null,
      "taxonomy_id": 10,
      "url_override": null,
      "description": "Brand",
      "icon": "/assets/default_taxon.png",
      "taxons": [
        {
          "id": 30,
          "name": "Ruby on Rails - 3",
          "pretty_name": "Brand -> Ruby on Rails - 3",
          "permalink": "brand/ruby-on-rails-3",
          "parent_id": 29,
          "taxonomy_id": 10,
          "url_override": null
        },
        {
          "id": 31,
          "name": "Ruby on Rails - 4",
          "pretty_name": "Brand -> Ruby on Rails - 4",
          "permalink": "brand/ruby-on-rails-4",
          "parent_id": 29,
          "taxonomy_id": 10,
          "url_override": null
        }
      ]
    },
    {
      "id": 30,
      "name": "Ruby on Rails - 3",
      "pretty_name": "Brand -> Ruby on Rails - 3",
      "permalink": "brand/ruby-on-rails-3",
      "parent_id": 29,
      "taxonomy_id": 10,
      "url_override": null,
      "description": "Ruby on Rails - 3",
      "icon": "/assets/default_taxon.png",
      "taxons": [

      ]
    },
    {
      "id": 31,
      "name": "Ruby on Rails - 4",
      "pretty_name": "Brand -> Ruby on Rails - 4",
      "permalink": "brand/ruby-on-rails-4",
      "parent_id": 29,
      "taxonomy_id": 10,
      "url_override": null,
      "description": "Ruby on Rails - 4",
      "icon": "/assets/default_taxon.png",
      "taxons": [

      ]
    }
  ]
}
```



## Get all taxons from a specific taxonomy


### Request

#### Endpoint

```plaintext
GET /api/taxons?without_children=true&amp;q[taxonomy_name_eq]=Brand
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons`

#### Parameters


```json
without_children: true
q: {&quot;taxonomy_name_eq&quot;=&gt;&quot;Brand&quot;}
```


| Name | Description |
|:-----|:------------|
| without_children  | Use this parameter to disable returning descendant taxons |
| q[purchasable_brands]  | Use this parameter to only return brands with purchasable products |
| q[taxonomy_name_eq]  | Optional parameter to filter by taxonomy name |
| q[name_eq]  | Use this parameter to query taxons by name |
| q[permalink_eq]  | Use this parameter to query taxons by permalink |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;83b7a054bdfcb28560e55421f32ae8c1&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 6170e888-4e52-4e3b-aa11-dbe43b63243b
X-Runtime: 0.021479
Vary: Origin
Content-Length: 742
200 OK
```


```json
{
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 500,
  "taxons": [
    {
      "id": 51,
      "name": "Brand",
      "pretty_name": "Brand",
      "permalink": "brand",
      "parent_id": null,
      "taxonomy_id": 14,
      "url_override": null,
      "description": "Brand",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 52,
      "name": "Ruby on Rails - 7",
      "pretty_name": "Brand -> Ruby on Rails - 7",
      "permalink": "brand/ruby-on-rails-7",
      "parent_id": 51,
      "taxonomy_id": 14,
      "url_override": null,
      "description": "Ruby on Rails - 7",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 53,
      "name": "Ruby on Rails - 8",
      "pretty_name": "Brand -> Ruby on Rails - 8",
      "permalink": "brand/ruby-on-rails-8",
      "parent_id": 51,
      "taxonomy_id": 14,
      "url_override": null,
      "description": "Ruby on Rails - 8",
      "icon": "/assets/default_taxon.png"
    }
  ]
}
```



## Get all taxons without children


### Request

#### Endpoint

```plaintext
GET /api/taxons?without_children=true
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons`

#### Parameters


```json
without_children: true
```


| Name | Description |
|:-----|:------------|
| without_children  | Use this parameter to disable returning descendant taxons |
| q[purchasable_brands]  | Use this parameter to only return brands with purchasable products |
| q[taxonomy_name_eq]  | Optional parameter to filter by taxonomy name |
| q[name_eq]  | Use this parameter to query taxons by name |
| q[permalink_eq]  | Use this parameter to query taxons by permalink |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;79aa24db6f69ab2c5913fdaa60c41ec1&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: cbe32de8-61cc-4513-84b5-908940dbbbfa
X-Runtime: 0.036802
Vary: Origin
Content-Length: 2670
200 OK
```


```json
{
  "count": 11,
  "total_count": 11,
  "current_page": 1,
  "pages": 1,
  "per_page": 500,
  "taxons": [
    {
      "id": 32,
      "name": "Category",
      "pretty_name": "Category",
      "permalink": "category",
      "parent_id": null,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Category",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 33,
      "name": "Kids",
      "pretty_name": "Category -> Kids",
      "permalink": "category/kids",
      "parent_id": 32,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Kids",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 34,
      "name": "Boys",
      "pretty_name": "Category -> Kids -> Boys",
      "permalink": "category/kids/boys",
      "parent_id": 33,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Boys",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 35,
      "name": "Boys Tops",
      "pretty_name": "Category -> Kids -> Boys -> Boys Tops",
      "permalink": "category/kids/boys/boys-tops",
      "parent_id": 34,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Boys Tops",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 36,
      "name": "Boys Shirts",
      "pretty_name": "Category -> Kids -> Boys -> Boys Tops -> Boys Shirts",
      "permalink": "category/kids/boys/boys-tops/boys-shirts",
      "parent_id": 35,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Boys Shirts",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 37,
      "name": "Girls",
      "pretty_name": "Category -> Kids -> Girls",
      "permalink": "category/kids/girls",
      "parent_id": 33,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Girls",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 38,
      "name": "Girls Tops",
      "pretty_name": "Category -> Kids -> Girls -> Girls Tops",
      "permalink": "category/kids/girls/girls-tops",
      "parent_id": 37,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Girls Tops",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 39,
      "name": "Girls Shirts",
      "pretty_name": "Category -> Kids -> Girls -> Girls Tops -> Girls Shirts",
      "permalink": "category/kids/girls/girls-tops/girls-shirts",
      "parent_id": 38,
      "taxonomy_id": 11,
      "url_override": null,
      "description": "Girls Shirts",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 40,
      "name": "Brand",
      "pretty_name": "Brand",
      "permalink": "brand",
      "parent_id": null,
      "taxonomy_id": 12,
      "url_override": null,
      "description": "Brand",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 41,
      "name": "Ruby on Rails - 5",
      "pretty_name": "Brand -> Ruby on Rails - 5",
      "permalink": "brand/ruby-on-rails-5",
      "parent_id": 40,
      "taxonomy_id": 12,
      "url_override": null,
      "description": "Ruby on Rails - 5",
      "icon": "/assets/default_taxon.png"
    },
    {
      "id": 42,
      "name": "Ruby on Rails - 6",
      "pretty_name": "Brand -> Ruby on Rails - 6",
      "permalink": "brand/ruby-on-rails-6",
      "parent_id": 40,
      "taxonomy_id": 12,
      "url_override": null,
      "description": "Ruby on Rails - 6",
      "icon": "/assets/default_taxon.png"
    }
  ]
}
```



## Get brands by category


### Request

#### Endpoint

```plaintext
GET /api/taxons/brands_by_category/baby
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons/brands_by_category/:taxon_name`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;b4e97dffc166a45968ea2f1dc6af8b23&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 6a15a3c7-a1d7-48ab-80e3-8a3a60a1e3e9
X-Runtime: 0.019679
Vary: Origin
Content-Length: 590
200 OK
```


```json
[
  {
    "id": 59,
    "parent_id": 58,
    "position": 0,
    "name": "brand_x",
    "permalink": "brand/brand_x",
    "taxonomy_id": 17,
    "lft": 6,
    "rgt": 7,
    "icon_file_name": null,
    "icon_content_type": null,
    "icon_file_size": null,
    "icon_updated_at": null,
    "description": null,
    "created_at": "2021-06-21T15:45:16.591-04:00",
    "updated_at": "2021-06-21T15:45:16.659-04:00",
    "meta_title": null,
    "meta_description": null,
    "meta_keywords": null,
    "depth": 1,
    "hidden": false,
    "highlight": false,
    "header_link": false,
    "url_override": null,
    "add_flair": false,
    "track_insights": false,
    "google_product_category": null,
    "short_description": null,
    "view_all_url_override": null
  }
]
```



## Get navigation taxons


### Request

#### Endpoint

```plaintext
GET /api/taxons/nav
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons/nav`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;43a48ded735000aeadb3862fa5b63b13&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ac28440e-d344-45d6-b0a3-3e591cf3b662
X-Runtime: 0.009620
Vary: Origin
Content-Length: 199
200 OK
```


```json
[
  {
    "id": 55,
    "name": "Kids",
    "navigation_url": "/shop/kids",
    "parent_id": 54,
    "lft": 2,
    "depth": 1,
    "highlight": false,
    "header_link": false,
    "add_flair": false,
    "view_all_url_override": null,
    "icon_url_original": false
  }
]
```



## Get purchasable brands


### Request

#### Endpoint

```plaintext
GET /api/taxons/brands
Accept: application/json
Host: example.org
Cookie: 
```

`GET /api/taxons/brands`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;fccfefeeb1ca517127253a6c2b11d59c&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: c6621e95-81c1-4638-acaa-a16d71a0b2bb
X-Runtime: 0.020715
Vary: Origin
Content-Length: 589
200 OK
```


```json
[
  {
    "id": 20,
    "parent_id": 19,
    "position": 0,
    "name": "brand_x",
    "permalink": "brand/brand_x",
    "taxonomy_id": 8,
    "lft": 6,
    "rgt": 7,
    "icon_file_name": null,
    "icon_content_type": null,
    "icon_file_size": null,
    "icon_updated_at": null,
    "description": null,
    "created_at": "2021-06-21T15:45:15.087-04:00",
    "updated_at": "2021-06-21T15:45:15.155-04:00",
    "meta_title": null,
    "meta_description": null,
    "meta_keywords": null,
    "depth": 1,
    "hidden": false,
    "highlight": false,
    "header_link": false,
    "url_override": null,
    "add_flair": false,
    "track_insights": false,
    "google_product_category": null,
    "short_description": null,
    "view_all_url_override": null
  }
]
```



# Users



## Login

Validate user email and password. Does not handle any session and only return the user

### Request

#### Endpoint

```plaintext
POST /api/users/login
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users/login`

#### Parameters


```json
user[email]=email100%40example.com&user[password]=secret
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |
| user[password] *required* | User password |
| order_number  | Include the order number of a an existing guest cart if intending to merge |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer d85e29b720fc68fb15f8b673d210d777d0ffa694763678dd
ETag: W/&quot;7eab583bddd30282d658ba942270603b&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 5bfbfd05-c54f-44bd-897d-dda4859693e7
X-Runtime: 0.019440
Vary: Origin
Content-Length: 565
200 OK
```


```json
{
  "id": 100,
  "email": "email100@example.com",
  "persistence_token": null,
  "perishable_token": null,
  "last_request_at": null,
  "login": "email100@example.com",
  "ship_address_id": null,
  "bill_address_id": null,
  "created_at": "2021-06-21T15:45:08.153-04:00",
  "updated_at": "2021-06-21T15:45:08.155-04:00",
  "spree_api_key": "d85e29b720fc68fb15f8b673d210d777d0ffa694763678dd",
  "authentication_token": null,
  "deleted_at": null,
  "first_name": null,
  "last_name": null,
  "receive_emails_agree": false,
  "exemption_number": null,
  "vat_id": null,
  "avalara_entity_use_code_id": null,
  "default_payment_method_token": null
}
```



## Login and merge guest cart

Log in and merge an existing guest cart with any existing carts associated with the user

### Request

#### Endpoint

```plaintext
POST /api/users/login
Accept: application/json
X-Spree-Order-Token: doITs0Fl33Jgtp6d13YKAQ
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users/login`

#### Parameters


```json
user[email]=email101%40example.com&user[password]=secret&order_number=M372656515
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |
| user[password] *required* | User password |
| order_number  | Include the order number of a an existing guest cart if intending to merge |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer 863fdefa6a40f7cf9ff0c9e3732a2a6d54c59872e7c7867c
ETag: W/&quot;1be72fd4fa4cf43bdc87f96e54ac48f0&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: d002135b-e918-460c-80ef-76cfb98e5b9e
X-Runtime: 0.024220
Vary: Origin
Content-Length: 565
200 OK
```


```json
{
  "id": 101,
  "email": "email101@example.com",
  "persistence_token": null,
  "perishable_token": null,
  "last_request_at": null,
  "login": "email101@example.com",
  "ship_address_id": null,
  "bill_address_id": null,
  "created_at": "2021-06-21T15:45:08.189-04:00",
  "updated_at": "2021-06-21T15:45:08.191-04:00",
  "spree_api_key": "863fdefa6a40f7cf9ff0c9e3732a2a6d54c59872e7c7867c",
  "authentication_token": null,
  "deleted_at": null,
  "first_name": null,
  "last_name": null,
  "receive_emails_agree": false,
  "exemption_number": null,
  "vat_id": null,
  "avalara_entity_use_code_id": null,
  "default_payment_method_token": null
}
```



## Mine

Get user account details, stored addresses, and stored credit cards

### Request

#### Endpoint

```plaintext
GET /api/users/mine
Accept: application/json
Authorizat IO N: Bearer e65deb18b4e0056cdf95b255569cafecae18772bcd61293b
Host: example.org
Cookie: 
```

`GET /api/users/mine`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer e65deb18b4e0056cdf95b255569cafecae18772bcd61293b
ETag: W/&quot;24598d90e0aeffc87160eda439683840&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 957d0b46-c966-4c42-ad41-8af9b8da61bc
X-Runtime: 0.046627
Vary: Origin
Content-Length: 1541
200 OK
```


```json
{
  "email": "email102@example.com",
  "first_name": null,
  "last_name": null,
  "id": 102,
  "subscribed": false,
  "addresses": [
    {
      "id": 69,
      "firstname": "John",
      "lastname": "Smith",
      "full_name": "John Smith",
      "address1": "A Different Road",
      "address2": "Northwest",
      "city": "Herndon",
      "zipcode": "10068",
      "phone": "555-555-0199",
      "company": "Company",
      "alternative_phone": "555-555-0199",
      "country_id": 53,
      "country_iso": "US",
      "state_id": 53,
      "state_name": null,
      "state_text": "AL",
      "country": {
        "id": 53,
        "iso_name": "UNITED STATES",
        "iso": "US",
        "iso3": "USA",
        "name": "United States",
        "numcode": 840
      },
      "default": true
    },
    {
      "id": 68,
      "firstname": "John",
      "lastname": "Smith",
      "full_name": "John Smith",
      "address1": "PO Box 1337",
      "address2": "Northwest",
      "city": "Herndon",
      "zipcode": "10067",
      "phone": "555-555-0199",
      "company": "Company",
      "alternative_phone": "555-555-0199",
      "country_id": 53,
      "country_iso": "US",
      "state_id": 53,
      "state_name": null,
      "state_text": "AL",
      "country": {
        "id": 53,
        "iso_name": "UNITED STATES",
        "iso": "US",
        "iso3": "USA",
        "name": "United States",
        "numcode": 840
      },
      "default": false
    }
  ],
  "payment_sources": [
    {
      "id": 6,
      "default": true,
      "source": {
        "id": 6,
        "payment_type": "CreditCard",
        "token": null,
        "created_at": "2021-06-21T15:45:08.794-04:00",
        "cc_type": null,
        "last_digits": null,
        "month": null,
        "year": null
      }
    },
    {
      "id": 7,
      "default": false,
      "source": {
        "id": 7,
        "payment_type": "ApplePayCard",
        "token": null,
        "created_at": "2021-06-21T15:45:08.807-04:00",
        "cc_type": null,
        "last_digits": null,
        "month": null,
        "year": null
      }
    },
    {
      "id": 8,
      "default": false,
      "source": {
        "id": 8,
        "payment_type": "PayPalAccount",
        "token": null,
        "created_at": "2021-06-21T15:45:08.821-04:00",
        "email": null
      }
    }
  ]
}
```



## Signup

Create a new user and return a bearer header to be used for further user related request

### Request

#### Endpoint

```plaintext
POST /api/users
Accept: application/json
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users`

#### Parameters


```json
user[email]=test%40example.com&user[password]=test123&user[password_confirmation]=test123
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |
| user[password] *required* | User password |
| user[password_confirmation] *required* | User password confirmation |
| user[first_name]  | User first name |
| user[last_name]  | User last name |
| subscribe  | If set to 'true', this will create a subscriber associated with the new user |
| order_number  | Include the order number of a an existing guest cart if intending to merge |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer de1bce0d4454fec90980cbf24c6dbfef489c435ff97b364e
ETag: W/&quot;00b83a1c7bcd2ea6abc6186d7c1bd3a7&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: f5581848-d49e-47b5-9c01-e1142020dea6
X-Runtime: 0.045907
Vary: Origin
Content-Length: 186
201 Created
```


```json
{
  "id": 103,
  "email": "test@example.com",
  "created_at": "2021-06-21T15:45:08.894-04:00",
  "updated_at": "2021-06-21T15:45:08.897-04:00",
  "subscribed": false,
  "bill_address": null,
  "ship_address": null
}
```



## Signup and merge guest cart

Create a user and merge an existing guest cart with any existing carts associated with the user

### Request

#### Endpoint

```plaintext
POST /api/users
Accept: application/json
X-Spree-Order-Token: VMu4EjaFBjFwO9bYPwBDbA
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/users`

#### Parameters


```json
user[email]=test%40example.com&user[password]=test123&user[password_confirmation]=test123&order_number=M762002139
```


| Name | Description |
|:-----|:------------|
| user[email] *required* | User email |
| user[password] *required* | User password |
| user[password_confirmation] *required* | User password confirmation |
| user[first_name]  | User first name |
| user[last_name]  | User last name |
| subscribe  | If set to 'true', this will create a subscriber associated with the new user |
| order_number  | Include the order number of a an existing guest cart if intending to merge |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer a3afe6af390ef21c3f46fb0ef6d322d160341ba05b41a5f5
ETag: W/&quot;214af91299272bdd57decc17d7cd9169&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: c5481949-45da-48cc-816e-d9416075a572
X-Runtime: 0.044540
Vary: Origin
Content-Length: 186
201 Created
```


```json
{
  "id": 104,
  "email": "test@example.com",
  "created_at": "2021-06-21T15:45:09.560-04:00",
  "updated_at": "2021-06-21T15:45:09.563-04:00",
  "subscribed": false,
  "bill_address": null,
  "ship_address": null
}
```



## Subscribe a user


### Request

#### Endpoint

```plaintext
PUT /api/users/106/subscribe
Accept: application/json
Authorizat IO N: Bearer b1e911493b235c8587fedf5535097a707e7d2bb8413551ec
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/users/:id/subscribe`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer b1e911493b235c8587fedf5535097a707e7d2bb8413551ec
ETag: W/&quot;e881978f508341de23eb50975ade7530&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 89a8bb4d-bb54-4550-aece-bddaf7aa5cc0
X-Runtime: 0.027152
Vary: Origin
Content-Length: 189
200 OK
```


```json
{
  "id": 106,
  "email": "email104@example.com",
  "created_at": "2021-06-21T15:45:09.661-04:00",
  "updated_at": "2021-06-21T15:45:09.665-04:00",
  "subscribed": true,
  "bill_address": null,
  "ship_address": null
}
```



## Unsubscribe a user


### Request

#### Endpoint

```plaintext
PUT /api/users/105/unsubscribe
Accept: application/json
Authorizat IO N: Bearer 19ad4c939c7f9b9bf3d4e594c6f2545b5e8ee19cb6a5ae94
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PUT /api/users/:id/unsubscribe`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
Authorization: Bearer 19ad4c939c7f9b9bf3d4e594c6f2545b5e8ee19cb6a5ae94
ETag: W/&quot;2ac271f430c5b722ce67fbeec80a40eb&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ad7ac58d-0434-41ab-90bb-9561abee9462
X-Runtime: 0.028252
Vary: Origin
Content-Length: 190
200 OK
```


```json
{
  "id": 105,
  "email": "email103@example.com",
  "created_at": "2021-06-21T15:45:09.605-04:00",
  "updated_at": "2021-06-21T15:45:09.608-04:00",
  "subscribed": false,
  "bill_address": null,
  "ship_address": null
}
```



# Variant



## Fetching a variant


### Request

#### Endpoint

```plaintext
GET /api/variants/103
Host: example.org
Cookie: 
```

`GET /api/variants/:variant_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;ae1797fbc65b40bd42ae7b2d0a99f167&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 886ccd6a-501a-4c44-87d3-a8a16d06f42f
X-Runtime: 0.082667
Vary: Origin
Content-Length: 2353
200 OK
```


```json
{
  "id": 103,
  "name": "Product #58 - 9361",
  "sku": "SKU-102",
  "is_master": false,
  "slug": "product-58-9361",
  "description": "As seen on TV!",
  "track_inventory": true,
  "height": null,
  "width": null,
  "depth": null,
  "weight": null,
  "lead_time": 2,
  "is_registry": false,
  "discontinued": false,
  "price": "10.0",
  "display_price": "$10.00",
  "options_text": "Size: S",
  "in_stock": false,
  "is_backorderable": false,
  "total_on_hand": 0,
  "is_destroyed": false,
  "option_values": [
    {
      "id": 45,
      "name": "Size-45",
      "presentation": "S",
      "option_type_name": "foo-size-45",
      "option_type_id": 45,
      "option_type_presentation": "Size",
      "position": 1
    }
  ],
  "images": [
    {
      "id": 1,
      "position": 1,
      "attachment_content_type": "image/jpeg",
      "attachment_file_name": "thinking-cat.jpg",
      "type": "Spree::Image",
      "attachment_updated_at": "2021-06-21T15:44:49.968-04:00",
      "attachment_width": 489,
      "attachment_height": 490,
      "alt": null,
      "viewable_type": "Spree::Variant",
      "viewable_id": 103,
      "mini_url": "/spree/products/1/mini/thinking-cat.jpg?1624304689",
      "small_url": "/spree/products/1/small/thinking-cat.jpg?1624304689",
      "product_url": "/spree/products/1/product/thinking-cat.jpg?1624304689",
      "large_url": "/spree/products/1/large/thinking-cat.jpg?1624304689",
      "product_large_url": "/spree/products/1/product_large/thinking-cat.jpg?1624304689",
      "product_retina_url": "/spree/products/1/product_retina/thinking-cat.jpg?1624304689",
      "product_zoom_url": "/spree/products/1/product_zoom/thinking-cat.jpg?1624304689"
    }
  ],
  "videos": [

  ],
  "variant_properties": [

  ],
  "stock_items": [

  ],
  "prices": [
    {
      "id": 72,
      "vendor_id": 170,
      "price": "10.0",
      "original_price": "10.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    },
    {
      "id": 73,
      "vendor_id": 171,
      "price": "20.0",
      "original_price": "20.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    }
  ]
}
```



## Fetching a variant with Monogram Customization


### Request

#### Endpoint

```plaintext
GET /api/variants/105
Host: example.org
Cookie: 
```

`GET /api/variants/:variant_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;0f399c3d11843717fad02a424128b0e8&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: a1109136-a9de-4009-93ab-b6320b3ba2c3
X-Runtime: 0.057747
Vary: Origin
Content-Length: 2990
200 OK
```


```json
{
  "id": 105,
  "name": "Product #59 - 3066",
  "sku": "SKU-104",
  "is_master": false,
  "slug": "product-59-3066",
  "description": "As seen on TV!",
  "track_inventory": true,
  "height": null,
  "width": null,
  "depth": null,
  "weight": null,
  "lead_time": 2,
  "is_registry": false,
  "discontinued": false,
  "price": "10.0",
  "display_price": "$10.00",
  "options_text": "Size: S",
  "in_stock": false,
  "is_backorderable": false,
  "total_on_hand": 0,
  "is_destroyed": false,
  "option_values": [
    {
      "id": 46,
      "name": "Size-46",
      "presentation": "S",
      "option_type_name": "foo-size-46",
      "option_type_id": 46,
      "option_type_presentation": "Size",
      "position": 1
    }
  ],
  "images": [
    {
      "id": 2,
      "position": 1,
      "attachment_content_type": "image/jpeg",
      "attachment_file_name": "thinking-cat.jpg",
      "type": "Spree::Image",
      "attachment_updated_at": "2021-06-21T15:44:50.613-04:00",
      "attachment_width": 489,
      "attachment_height": 490,
      "alt": null,
      "viewable_type": "Spree::Variant",
      "viewable_id": 105,
      "mini_url": "/spree/products/2/mini/thinking-cat.jpg?1624304690",
      "small_url": "/spree/products/2/small/thinking-cat.jpg?1624304690",
      "product_url": "/spree/products/2/product/thinking-cat.jpg?1624304690",
      "large_url": "/spree/products/2/large/thinking-cat.jpg?1624304690",
      "product_large_url": "/spree/products/2/product_large/thinking-cat.jpg?1624304690",
      "product_retina_url": "/spree/products/2/product_retina/thinking-cat.jpg?1624304690",
      "product_zoom_url": "/spree/products/2/product_zoom/thinking-cat.jpg?1624304690"
    }
  ],
  "videos": [

  ],
  "variant_properties": [

  ],
  "stock_items": [

  ],
  "prices": [
    {
      "id": 75,
      "vendor_id": 177,
      "price": "10.0",
      "original_price": "10.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    },
    {
      "id": 76,
      "vendor_id": 178,
      "price": "20.0",
      "original_price": "20.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": false
      },
      "monogram": {
        "monogrammable_only": false,
        "monogram_price": "5.5",
        "monogram_cost_price": "2.25",
        "monogram_lead_time": null,
        "monogram_max_text_length": 20,
        "monogram_customizations": {
          "fonts": [
            {
              "name": "Monogram Font 1",
              "value": "serif"
            },
            {
              "name": "Monogram Font 1 Title",
              "value": "Toy Soilder"
            },
            {
              "name": "Monogram Font 2",
              "value": "Times"
            },
            {
              "name": "Monogram Font 2 Title",
              "value": "Emerson"
            }
          ],
          "colors": [
            {
              "name": "Monogram Color 1",
              "value": "#ffffff"
            },
            {
              "name": "Monogram Color 1 Title",
              "value": "White"
            },
            {
              "name": "Monogram Color 2",
              "value": "#FF0000"
            },
            {
              "name": "Monogram Color 2 Title",
              "value": "Red"
            }
          ]
        },
        "display_monogram_customizations": {
          "colors": {
            "Monogram Color 1": {
              "value": "#ffffff",
              "name": "White"
            },
            "Monogram Color 2": {
              "value": "#FF0000",
              "name": "Red"
            }
          },
          "fonts": {
            "Monogram Font 1": {
              "value": "serif",
              "name": "Toy Soilder"
            },
            "Monogram Font 2": {
              "value": "Times",
              "name": "Emerson"
            }
          }
        },
        "monogrammable": true
      }
    }
  ]
}
```



## Fetching a variant with Monogram Customization and color is not required


### Request

#### Endpoint

```plaintext
GET /api/variants/107
Host: example.org
Cookie: 
```

`GET /api/variants/:variant_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;b2ecbe9d8590caf4aef5ebfa11fe8f11&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 4bf4de19-d113-4659-8295-75271477aacf
X-Runtime: 0.057172
Vary: Origin
Content-Length: 2696
200 OK
```


```json
{
  "id": 107,
  "name": "Product #60 - 1262",
  "sku": "SKU-106",
  "is_master": false,
  "slug": "product-60-1262",
  "description": "As seen on TV!",
  "track_inventory": true,
  "height": null,
  "width": null,
  "depth": null,
  "weight": null,
  "lead_time": 2,
  "is_registry": false,
  "discontinued": false,
  "price": "10.0",
  "display_price": "$10.00",
  "options_text": "Size: S",
  "in_stock": false,
  "is_backorderable": false,
  "total_on_hand": 0,
  "is_destroyed": false,
  "option_values": [
    {
      "id": 47,
      "name": "Size-47",
      "presentation": "S",
      "option_type_name": "foo-size-47",
      "option_type_id": 47,
      "option_type_presentation": "Size",
      "position": 1
    }
  ],
  "images": [
    {
      "id": 3,
      "position": 1,
      "attachment_content_type": "image/jpeg",
      "attachment_file_name": "thinking-cat.jpg",
      "type": "Spree::Image",
      "attachment_updated_at": "2021-06-21T15:44:51.296-04:00",
      "attachment_width": 489,
      "attachment_height": 490,
      "alt": null,
      "viewable_type": "Spree::Variant",
      "viewable_id": 107,
      "mini_url": "/spree/products/3/mini/thinking-cat.jpg?1624304691",
      "small_url": "/spree/products/3/small/thinking-cat.jpg?1624304691",
      "product_url": "/spree/products/3/product/thinking-cat.jpg?1624304691",
      "large_url": "/spree/products/3/large/thinking-cat.jpg?1624304691",
      "product_large_url": "/spree/products/3/product_large/thinking-cat.jpg?1624304691",
      "product_retina_url": "/spree/products/3/product_retina/thinking-cat.jpg?1624304691",
      "product_zoom_url": "/spree/products/3/product_zoom/thinking-cat.jpg?1624304691"
    }
  ],
  "videos": [

  ],
  "variant_properties": [

  ],
  "stock_items": [

  ],
  "prices": [
    {
      "id": 78,
      "vendor_id": 184,
      "price": "10.0",
      "original_price": "10.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    },
    {
      "id": 79,
      "vendor_id": 185,
      "price": "20.0",
      "original_price": "20.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": false
      },
      "monogram": {
        "monogrammable_only": false,
        "monogram_price": "5.5",
        "monogram_cost_price": "2.25",
        "monogram_lead_time": null,
        "monogram_max_text_length": 20,
        "monogram_customizations": {
          "fonts": [
            {
              "name": "Monogram Font 1",
              "value": "serif"
            },
            {
              "name": "Monogram Font 1 Title",
              "value": "Toy Soilder"
            },
            {
              "name": "Monogram Font 2",
              "value": "Times"
            },
            {
              "name": "Monogram Font 2 Title",
              "value": "Emerson"
            }
          ],
          "colors": [

          ]
        },
        "display_monogram_customizations": {
          "colors": {
          },
          "fonts": {
            "Monogram Font 1": {
              "value": "serif",
              "name": "Toy Soilder"
            },
            "Monogram Font 2": {
              "value": "Times",
              "name": "Emerson"
            }
          }
        },
        "monogrammable": true
      }
    }
  ]
}
```



## Fetching a variant with dimensions


### Request

#### Endpoint

```plaintext
GET /api/variants/109
Host: example.org
Cookie: 
```

`GET /api/variants/:variant_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;15272ba8e21b33849a11edc142906941&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 5972d21b-dc5f-44d9-8d1c-0167811d31f4
X-Runtime: 0.078489
Vary: Origin
Content-Length: 2367
200 OK
```


```json
{
  "id": 109,
  "name": "Product #61 - 9609",
  "sku": "SKU-108",
  "is_master": false,
  "slug": "product-61-9609",
  "description": "As seen on TV!",
  "track_inventory": true,
  "height": "5.0\"",
  "width": "2.5\"",
  "depth": "1.2\"",
  "weight": "2.5 lbs",
  "lead_time": 2,
  "is_registry": false,
  "discontinued": false,
  "price": "10.0",
  "display_price": "$10.00",
  "options_text": "Size: S",
  "in_stock": false,
  "is_backorderable": false,
  "total_on_hand": 0,
  "is_destroyed": false,
  "option_values": [
    {
      "id": 48,
      "name": "Size-48",
      "presentation": "S",
      "option_type_name": "foo-size-48",
      "option_type_id": 48,
      "option_type_presentation": "Size",
      "position": 1
    }
  ],
  "images": [
    {
      "id": 4,
      "position": 1,
      "attachment_content_type": "image/jpeg",
      "attachment_file_name": "thinking-cat.jpg",
      "type": "Spree::Image",
      "attachment_updated_at": "2021-06-21T15:44:51.997-04:00",
      "attachment_width": 489,
      "attachment_height": 490,
      "alt": null,
      "viewable_type": "Spree::Variant",
      "viewable_id": 109,
      "mini_url": "/spree/products/4/mini/thinking-cat.jpg?1624304691",
      "small_url": "/spree/products/4/small/thinking-cat.jpg?1624304691",
      "product_url": "/spree/products/4/product/thinking-cat.jpg?1624304691",
      "large_url": "/spree/products/4/large/thinking-cat.jpg?1624304691",
      "product_large_url": "/spree/products/4/product_large/thinking-cat.jpg?1624304691",
      "product_retina_url": "/spree/products/4/product_retina/thinking-cat.jpg?1624304691",
      "product_zoom_url": "/spree/products/4/product_zoom/thinking-cat.jpg?1624304691"
    }
  ],
  "videos": [

  ],
  "variant_properties": [

  ],
  "stock_items": [

  ],
  "prices": [
    {
      "id": 81,
      "vendor_id": 191,
      "price": "10.0",
      "original_price": "10.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    },
    {
      "id": 82,
      "vendor_id": 192,
      "price": "20.0",
      "original_price": "20.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    }
  ]
}
```



## Fetching a variant without dimensions


### Request

#### Endpoint

```plaintext
GET /api/variants/111
Host: example.org
Cookie: 
```

`GET /api/variants/:variant_id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;31ae13caf5745c18dda4bd3b837ee2a0&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 8e0bfb81-fea3-4d1a-a0c5-5b0c50707f27
X-Runtime: 0.052865
Vary: Origin
Content-Length: 2353
200 OK
```


```json
{
  "id": 111,
  "name": "Product #62 - 6824",
  "sku": "SKU-110",
  "is_master": false,
  "slug": "product-62-6824",
  "description": "As seen on TV!",
  "track_inventory": true,
  "height": null,
  "width": null,
  "depth": null,
  "weight": null,
  "lead_time": 2,
  "is_registry": false,
  "discontinued": false,
  "price": "10.0",
  "display_price": "$10.00",
  "options_text": "Size: S",
  "in_stock": false,
  "is_backorderable": false,
  "total_on_hand": 0,
  "is_destroyed": false,
  "option_values": [
    {
      "id": 49,
      "name": "Size-49",
      "presentation": "S",
      "option_type_name": "foo-size-49",
      "option_type_id": 49,
      "option_type_presentation": "Size",
      "position": 1
    }
  ],
  "images": [
    {
      "id": 5,
      "position": 1,
      "attachment_content_type": "image/jpeg",
      "attachment_file_name": "thinking-cat.jpg",
      "type": "Spree::Image",
      "attachment_updated_at": "2021-06-21T15:44:52.656-04:00",
      "attachment_width": 489,
      "attachment_height": 490,
      "alt": null,
      "viewable_type": "Spree::Variant",
      "viewable_id": 111,
      "mini_url": "/spree/products/5/mini/thinking-cat.jpg?1624304692",
      "small_url": "/spree/products/5/small/thinking-cat.jpg?1624304692",
      "product_url": "/spree/products/5/product/thinking-cat.jpg?1624304692",
      "large_url": "/spree/products/5/large/thinking-cat.jpg?1624304692",
      "product_large_url": "/spree/products/5/product_large/thinking-cat.jpg?1624304692",
      "product_retina_url": "/spree/products/5/product_retina/thinking-cat.jpg?1624304692",
      "product_zoom_url": "/spree/products/5/product_zoom/thinking-cat.jpg?1624304692"
    }
  ],
  "videos": [

  ],
  "variant_properties": [

  ],
  "stock_items": [

  ],
  "prices": [
    {
      "id": 84,
      "vendor_id": 198,
      "price": "10.0",
      "original_price": "10.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    },
    {
      "id": 85,
      "vendor_id": 199,
      "price": "20.0",
      "original_price": "20.0",
      "discount_percent": 0.0,
      "total_on_hand": 0,
      "country_iso": null,
      "final_sale": false,
      "on_sale": false,
      "offer_settings": {
        "cost_price": null,
        "is_registry": null
      },
      "monogram": {
        "monogrammable_only": null,
        "monogram_price": null,
        "monogram_cost_price": null,
        "monogram_lead_time": null,
        "monogram_max_text_length": null,
        "monogram_customizations": null,
        "display_monogram_customizations": null,
        "monogrammable": null
      }
    }
  ]
}
```



# Wallet payment sources



## Get user wallet payment sources


### Request

#### Endpoint

```plaintext
GET /api/wallet_payment_sources
Accept: application/json
Authorizat IO N: Bearer b1ad3e7dacb184608b50812eb8bd741f32cd5066b625a2df
Host: example.org
Cookie: 
```

`GET /api/wallet_payment_sources`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;886f54f13d90c4c62ac5846a7216d137&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 109cb8c7-5281-4f26-be35-08c9c7d15402
X-Runtime: 0.013349
Vary: Origin
Content-Length: 206
200 OK
```


```json
[
  {
    "id": 4,
    "user_id": 61,
    "payment_source_type": "SolidusPaypalBraintree::Source",
    "payment_source_id": 4,
    "default": false,
    "created_at": "2021-06-21T15:44:59.226-04:00",
    "updated_at": "2021-06-21T15:44:59.226-04:00"
  }
]
```



## Remove the payment from the user wallet


### Request

#### Endpoint

```plaintext
DELETE /api/wallet_payment_sources/3
Accept: application/json
Authorizat IO N: Bearer 8960af19cb436163210c66873bcc0c2df8147c333ed02b5e
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/wallet_payment_sources/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 4b89b896-91b3-4a29-8880-0ef1d5153c56
X-Runtime: 0.037155
Vary: Origin
204 No Content
```




## Set a wallet payment source as the default user payment method


### Request

#### Endpoint

```plaintext
POST /api/wallet_payment_sources/5/default
Accept: application/json
Authorizat IO N: Bearer 16d1face980da2b0a56b7ac18439448b2816f89c726d3a8b
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/wallet_payment_sources/:id/default`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 641b612e-f980-4081-92ac-6f5b621768dc
X-Runtime: 0.014193
Vary: Origin
204 No Content
```




# Wished Products

Create a wished product. Any user can create a wished product for one of their own wishlists.                 Admins can create wished products for others.

## Create a wished product


### Request

#### Endpoint

```plaintext
POST /api/wished_products
Accept: application/json
Authorizat IO N: Bearer 395542a9eeeb4ce6bf7696fcc3bef45b15436c2828fa3e9b
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/wished_products`

#### Parameters


```json
wished_product[wishlist_id]=1&wished_product[variant_id]=41&wished_product[quantity]=2&wished_product[remark]=Foo+bar
```


| Name | Description |
|:-----|:------------|
| wished_product[wishlist_id]  | Optional. If the wishlist_id is not provided, the product will be created for the spree_api_user's               default wishlist. Admin users can pass another user's wishlist_id |
| wished_product[variant_id] *required* | Wished product variant |
| wished_product[quantity]  | Wished product quantity |
| wished_product[remark]  | Wished product remark |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;30c154a6930a1ee1b47ac1ee1529068e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 787ee385-cf7d-404b-9b18-20624fd4aebb
X-Runtime: 0.054747
Vary: Origin
Content-Length: 117
201 Created
```


```json
{
  "id": 1,
  "wishlist_id": 1,
  "variant_id": 41,
  "quantity": 2,
  "remark": "Foo bar",
  "created_at": "2021-06-21T15:44:42.162-04:00"
}
```



## Delete a wished product


### Request

#### Endpoint

```plaintext
DELETE /api/wished_products/2
Accept: application/json
Authorizat IO N: Bearer 1f5ec0d5a60b1724bbe47ce0b0fd276b0c7e4fcc9a1d6ae5
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/wished_products/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: ca067c61-b946-4f71-a2fb-4a15cdc64ee0
X-Runtime: 0.021059
Vary: Origin
204 No Content
```




## Get a single wished product


### Request

#### Endpoint

```plaintext
GET /api/wished_products/20
Accept: application/json
Authorizat IO N: Bearer 1d9a09c88a070de3b8e005fd3e574c61c988b1f354635380
Host: example.org
Cookie: 
```

`GET /api/wished_products/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;795e3dfcad37f049f898988a964c3431&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 88e15d24-cd31-4fc2-89a3-2f8a8915486d
X-Runtime: 0.013584
Vary: Origin
Content-Length: 114
200 OK
```


```json
{
  "id": 20,
  "wishlist_id": 12,
  "variant_id": 81,
  "quantity": 1,
  "remark": null,
  "created_at": "2021-06-21T15:44:45.962-04:00"
}
```



## Get all wished products


### Request

#### Endpoint

```plaintext
GET /api/wished_products
Accept: application/json
Authorizat IO N: Bearer 84d3f008201dd5d6fce4b25e8285252f3558f258fb7eea98
Host: example.org
Cookie: 
```

`GET /api/wished_products`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[wishlist_user_id_eq]  | Anything accessible by ransack can be passed in as query params |
| q[wishlist_id_eq]  | Anything accessible by ransack can be passed in as query params |
| with_variant  | Include this parameter if you would like the variant to be returned in the                              response with the wished product |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;f0172e84a2c6a4759a37f6d933a1235e&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 8921f6a4-32fd-44d7-91a3-c123bd6751a3
X-Runtime: 0.013293
Vary: Origin
Content-Length: 430
200 OK
```


```json
{
  "wished_products": [
    {
      "id": 13,
      "wishlist_id": 7,
      "variant_id": 65,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.449-04:00"
    },
    {
      "id": 12,
      "wishlist_id": 6,
      "variant_id": 63,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.284-04:00"
    },
    {
      "id": 11,
      "wishlist_id": 5,
      "variant_id": 61,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.115-04:00"
    }
  ],
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Get all wished products with variants


### Request

#### Endpoint

```plaintext
GET /api/wished_products/mine?with_variant=true
Accept: application/json
Authorizat IO N: Bearer 3ada7f97e341bfb72854eca7951c60c568611f0c2b9e67c5
Host: example.org
Cookie: 
```

`GET /api/wished_products/mine`

#### Parameters


```json
with_variant: true
```


| Name | Description |
|:-----|:------------|
| q[wishlist_id_eq]  | Anything accessible by ransack can be passed in as query params |
| with_variant  | Include this parameter if you would like the variant to be returned in the                              response with the wished product |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;981910d885cfc5c1df2db6b8699821c4&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 3e024025-4843-4391-9c0c-cf3b1a7e6ab6
X-Runtime: 0.111420
Vary: Origin
Content-Length: 2372
200 OK
```


```json
{
  "wished_products": [
    {
      "id": 8,
      "wishlist_id": 4,
      "variant_id": 55,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:43.530-04:00",
      "variant": {
        "id": 55,
        "name": "Product #28 - 2316",
        "sku": "SKU-54",
        "is_master": false,
        "slug": "product-28-2316",
        "description": "As seen on TV!",
        "track_inventory": true,
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 27,
            "name": "Size-27",
            "presentation": "S",
            "option_type_name": "foo-size-27",
            "option_type_id": 27,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    },
    {
      "id": 9,
      "wishlist_id": 4,
      "variant_id": 57,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:43.670-04:00",
      "variant": {
        "id": 57,
        "name": "Product #29 - 8760",
        "sku": "SKU-56",
        "is_master": false,
        "slug": "product-29-8760",
        "description": "As seen on TV!",
        "track_inventory": true,
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 28,
            "name": "Size-28",
            "presentation": "S",
            "option_type_name": "foo-size-28",
            "option_type_id": 28,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    },
    {
      "id": 10,
      "wishlist_id": 4,
      "variant_id": 59,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:43.826-04:00",
      "variant": {
        "id": 59,
        "name": "Product #30 - 8764",
        "sku": "SKU-58",
        "is_master": false,
        "slug": "product-30-8764",
        "description": "As seen on TV!",
        "track_inventory": true,
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 29,
            "name": "Size-29",
            "presentation": "S",
            "option_type_name": "foo-size-29",
            "option_type_id": 29,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    }
  ],
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Get all wished products with variants


### Request

#### Endpoint

```plaintext
GET /api/wished_products?with_variant=true
Accept: application/json
Authorizat IO N: Bearer 27845f690af119182f24b77bae629674781b024b13fa06c1
Host: example.org
Cookie: 
```

`GET /api/wished_products`

#### Parameters


```json
with_variant: true
```


| Name | Description |
|:-----|:------------|
| q[wishlist_user_id_eq]  | Anything accessible by ransack can be passed in as query params |
| q[wishlist_id_eq]  | Anything accessible by ransack can be passed in as query params |
| with_variant  | Include this parameter if you would like the variant to be returned in the                              response with the wished product |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;ac909754316abd810c10c0d03fdb3529&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 6268c044-f00d-4735-9e0a-e45cfc959a3f
X-Runtime: 0.142088
Vary: Origin
Content-Length: 2433
200 OK
```


```json
{
  "wished_products": [
    {
      "id": 16,
      "wishlist_id": 10,
      "variant_id": 71,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.966-04:00",
      "variant": {
        "id": 71,
        "name": "Product #36 - 7198",
        "sku": "SKU-70",
        "is_master": false,
        "slug": "product-36-7198",
        "description": "As seen on TV!",
        "track_inventory": true,
        "cost_price": "17.0",
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 35,
            "name": "Size-35",
            "presentation": "S",
            "option_type_name": "foo-size-35",
            "option_type_id": 35,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    },
    {
      "id": 15,
      "wishlist_id": 9,
      "variant_id": 69,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.821-04:00",
      "variant": {
        "id": 69,
        "name": "Product #35 - 9967",
        "sku": "SKU-68",
        "is_master": false,
        "slug": "product-35-9967",
        "description": "As seen on TV!",
        "track_inventory": true,
        "cost_price": "17.0",
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 34,
            "name": "Size-34",
            "presentation": "S",
            "option_type_name": "foo-size-34",
            "option_type_id": 34,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    },
    {
      "id": 14,
      "wishlist_id": 8,
      "variant_id": 67,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:44.673-04:00",
      "variant": {
        "id": 67,
        "name": "Product #34 - 345",
        "sku": "SKU-66",
        "is_master": false,
        "slug": "product-34-345",
        "description": "As seen on TV!",
        "track_inventory": true,
        "cost_price": "17.0",
        "height": null,
        "width": null,
        "depth": null,
        "weight": null,
        "lead_time": 2,
        "is_registry": false,
        "discontinued": false,
        "price": null,
        "display_price": "",
        "options_text": "Size: S",
        "in_stock": false,
        "is_backorderable": false,
        "total_on_hand": 0,
        "is_destroyed": false,
        "option_values": [
          {
            "id": 33,
            "name": "Size-33",
            "presentation": "S",
            "option_type_name": "foo-size-33",
            "option_type_id": 33,
            "option_type_presentation": "Size",
            "position": 1
          }
        ],
        "images": [

        ],
        "videos": [

        ],
        "variant_properties": [

        ],
        "stock_items": [

        ],
        "prices": [

        ]
      }
    }
  ],
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Get my wished products


### Request

#### Endpoint

```plaintext
GET /api/wished_products/mine
Accept: application/json
Authorizat IO N: Bearer f94133dbfe770c509906524b114c6a8c254630eab69edd0f
Host: example.org
Cookie: 
```

`GET /api/wished_products/mine`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[wishlist_id_eq]  | Anything accessible by ransack can be passed in as query params |
| with_variant  | Include this parameter if you would like the variant to be returned in the                              response with the wished product |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;b38182ab0b1361229b7c964dc1fb194d&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 84ae489b-aeeb-462c-b025-121e8b3bbb73
X-Runtime: 0.066498
Vary: Origin
Content-Length: 427
200 OK
```


```json
{
  "wished_products": [
    {
      "id": 5,
      "wishlist_id": 3,
      "variant_id": 49,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:42.935-04:00"
    },
    {
      "id": 6,
      "wishlist_id": 3,
      "variant_id": 51,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:43.088-04:00"
    },
    {
      "id": 7,
      "wishlist_id": 3,
      "variant_id": 53,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:44:43.279-04:00"
    }
  ],
  "count": 3,
  "total_count": 3,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Update a wishlist


### Request

#### Endpoint

```plaintext
PATCH /api/wished_products/17
Accept: application/json
Authorizat IO N: Bearer 97ac93b9b387bf82f8b01d662ca53e4d5ba941d3f0952ef0
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/wished_products/:id`

#### Parameters


```json
wished_product[wishlist_id]=11&wished_product[variant_id]=79&wished_product[quantity]=2&wished_product[remark]=Foo+bar
```


| Name | Description |
|:-----|:------------|
| wished_product[wishlist_id]  | Optional. If the wishlist_id is not provided, the product will be created for the spree_api_user's               default wishlist. Admin users can pass another user's wishlist_id |
| wished_product[variant_id] *required* | Wished product variant |
| wished_product[quantity]  | Wished product quantity |
| wished_product[remark]  | Wished product remark |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;c008297381037d468c17bc9522aed215&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: e8bcfd0e-1389-4b85-a841-5db7a3961113
X-Runtime: 0.015813
Vary: Origin
Content-Length: 119
200 OK
```


```json
{
  "id": 17,
  "wishlist_id": 11,
  "variant_id": 79,
  "quantity": 2,
  "remark": "Foo bar",
  "created_at": "2021-06-21T15:44:45.343-04:00"
}
```



# Wishlists

Update a wishlist. Users can update their own wishlists, admins can create wishlists for others.

## Create a wishlist


### Request

#### Endpoint

```plaintext
POST /api/wishlists
Accept: application/json
Authorizat IO N: Bearer b24d7434b5a5487f1bc49922dbc09c241f4941bd2e071ed4
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`POST /api/wishlists`

#### Parameters


```json
wishlist[name]&wishlist[user_id]=111&wishlist[is_default]=true&wishlist[is_public]=false
```


| Name | Description |
|:-----|:------------|
| wishlist[name] *required* | The first wishlist created is given the name "My Wishlist".               Subsequent wishlists must be given a new name. |
| wishlist[user_id]  | User ID must match that of the current_api_user unless the current_api_user is an admin.               User ID will be inferred from the current_api_user unless explicitly provided |
| wishlist[is_default]  | The first wishlist created will automatically be set to default. Subsequent lists will have is_default               set to false. If you pass is_default true it will set all other user wishlists to is_default: false. |
| wishlist[is_public]  | Wishlist is public |
| wishlist[wished_products_attributes]  | You can create a new wishlist with wished products in one step by passing them as nested attributes.               This should be an array of objects. |
| wishlist[wished_products_attributes][variant_id]  | Pass the variant id for a wished product as a nested attribute. |
| wishlist[wished_products_attributes][quantity]  | Pass the quantity for a wished product as a nested attribute |
| wishlist[wished_products_attributes][remark]  | Pass the remark for the specific wished product as a nested attribute. |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;fd87dc4e46484b7912dc6b5a75c3d3be&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 8e8fa890-ea5d-4013-97f3-b751fed7152a
X-Runtime: 0.016223
Vary: Origin
Content-Length: 101
201 Created
```


```json
{
  "id": 28,
  "user_id": 111,
  "name": "My Wishlist",
  "is_public": false,
  "is_default": true,
  "wished_products": [

  ]
}
```



## Delete a wishlist


### Request

#### Endpoint

```plaintext
DELETE /api/wishlists/14
Accept: application/json
Authorizat IO N: Bearer 6ceffeda2df17ac3a59df556476ebdfde3f1fb1e93a8654e
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`DELETE /api/wishlists/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Cache-Control: no-cache
X-Request-Id: 486922e6-eaba-4304-bd90-19dee0049064
X-Runtime: 0.013361
Vary: Origin
204 No Content
```




## Get a single wishlist


### Request

#### Endpoint

```plaintext
GET /api/wishlists/40
Accept: application/json
Authorizat IO N: Bearer 633bbe554317c411973f0a4a42a082664f07d8cb3b2724b7
Host: example.org
Cookie: 
```

`GET /api/wishlists/:id`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;2c3872cd664000811e58ac27d2858a00&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 03b4e9bc-fa2d-4025-8d77-874d5ca7dfaf
X-Runtime: 0.012565
Vary: Origin
Content-Length: 449
200 OK
```


```json
{
  "id": 40,
  "user_id": 124,
  "name": "Wishlist #35",
  "is_public": false,
  "is_default": true,
  "wished_products": [
    {
      "id": 29,
      "wishlist_id": 40,
      "variant_id": 181,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:11.261-04:00"
    },
    {
      "id": 30,
      "wishlist_id": 40,
      "variant_id": 183,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:11.404-04:00"
    },
    {
      "id": 31,
      "wishlist_id": 40,
      "variant_id": 185,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:11.530-04:00"
    }
  ]
}
```



## Get all wishlists


### Request

#### Endpoint

```plaintext
GET /api/wishlists
Accept: application/json
Authorizat IO N: Bearer cd4a405b00eb48e3067e60f8118f4cfbb987cf3caed21cfd
Host: example.org
Cookie: 
```

`GET /api/wishlists`

#### Parameters



| Name | Description |
|:-----|:------------|
| q[user_id_eq]  | Anything accessible by ransack can be passed in as query params |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;cc8d6f2c34b06aef6373b19bca92d005&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 6ae28982-88f0-48b1-8c46-16c56ee066b8
X-Runtime: 0.013775
Vary: Origin
Content-Length: 904
200 OK
```


```json
{
  "wishlists": [
    {
      "id": 29,
      "user_id": 112,
      "name": "Wishlist #24",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 30,
      "user_id": 113,
      "name": "Wishlist #25",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 31,
      "user_id": 114,
      "name": "Wishlist #26",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 32,
      "user_id": 115,
      "name": "Wishlist #27",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 33,
      "user_id": 116,
      "name": "Wishlist #28",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 34,
      "user_id": 117,
      "name": "Wishlist #29",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 35,
      "user_id": 118,
      "name": "Wishlist #30",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 36,
      "user_id": 119,
      "name": "Wishlist #31",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 37,
      "user_id": 120,
      "name": "Wishlist #32",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 38,
      "user_id": 121,
      "name": "Wishlist #33",
      "is_public": false,
      "is_default": true
    }
  ],
  "count": 10,
  "total_count": 10,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Get my default wishlist


### Request

#### Endpoint

```plaintext
GET /api/wishlist
Accept: application/json
Authorizat IO N: Bearer fee3853ffc0987f7f21d4b2a3f7320130627f30df66586d3
Host: example.org
Cookie: 
```

`GET /api/wishlist`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;beae0617d12b454c5a05aa3d60926807&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 374335cf-9f16-4853-bf78-81ac5b8a17d6
X-Runtime: 0.011998
Vary: Origin
Content-Length: 449
200 OK
```


```json
{
  "id": 39,
  "user_id": 123,
  "name": "Wishlist #34",
  "is_public": false,
  "is_default": true,
  "wished_products": [
    {
      "id": 26,
      "wishlist_id": 39,
      "variant_id": 175,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:10.765-04:00"
    },
    {
      "id": 27,
      "wishlist_id": 39,
      "variant_id": 177,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:10.898-04:00"
    },
    {
      "id": 28,
      "wishlist_id": 39,
      "variant_id": 179,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:11.033-04:00"
    }
  ]
}
```



## Get my wishlists


### Request

#### Endpoint

```plaintext
GET /api/wishlists/mine
Accept: application/json
Authorizat IO N: Bearer 20cae67b0bb00a52433453063d890eaddeb5d125bafbb022
Host: example.org
Cookie: 
```

`GET /api/wishlists/mine`

#### Parameters


None known.


### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;988b365cfed1da142f439349fc2d1efa&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: f1880758-1838-40eb-89b4-e38661cb60b0
X-Runtime: 0.017455
Vary: Origin
Content-Length: 913
200 OK
```


```json
{
  "wishlists": [
    {
      "id": 18,
      "user_id": 110,
      "name": "Wishlist #14",
      "is_public": false,
      "is_default": true
    },
    {
      "id": 19,
      "user_id": 110,
      "name": "Wishlist #15",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 20,
      "user_id": 110,
      "name": "Wishlist #16",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 21,
      "user_id": 110,
      "name": "Wishlist #17",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 22,
      "user_id": 110,
      "name": "Wishlist #18",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 23,
      "user_id": 110,
      "name": "Wishlist #19",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 24,
      "user_id": 110,
      "name": "Wishlist #20",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 25,
      "user_id": 110,
      "name": "Wishlist #21",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 26,
      "user_id": 110,
      "name": "Wishlist #22",
      "is_public": false,
      "is_default": false
    },
    {
      "id": 27,
      "user_id": 110,
      "name": "Wishlist #23",
      "is_public": false,
      "is_default": false
    }
  ],
  "count": 10,
  "total_count": 10,
  "current_page": 1,
  "pages": 1,
  "per_page": 25
}
```



## Update a wishlist


### Request

#### Endpoint

```plaintext
PATCH /api/wishlists/13
Accept: application/json
Authorizat IO N: Bearer b9fe2eba62cc832dc272e50d09a996d9f4b93a00c97c802d
Host: example.org
Content-Type: application/x-www-form-urlencoded
Cookie: 
```

`PATCH /api/wishlists/:id`

#### Parameters


```json
wishlist[name]=Another+Wishlist&wishlist[user_id]=107&wishlist[is_default]=true&wishlist[is_public]=false
```


| Name | Description |
|:-----|:------------|
| wishlist[name] *required* | The first wishlist created is given the name "My Wishlist".               Subsequent wishlists must be given a new name. |
| wishlist[user_id]  | User ID must match that of the current_api_user unless the current_api_user is an admin.               User ID will be inferred from the current_api_user unless explicitly provided |
| wishlist[is_default]  | The first wishlist created will automatically be set to default. Subsequent lists will have is_default               set to false. If you pass is_default true it will set all other user wishlists to is_default: false. |
| wishlist[is_public]  | Wishlist is public |



### Response

```plaintext
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json; charset=utf-8
ETag: W/&quot;2dcb1ccc74459358ab7c566748802355&quot;
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: ecb83ad7-87c3-4c21-ac0f-55d6cf6bf626
X-Runtime: 0.041497
Vary: Origin
Content-Length: 453
200 OK
```


```json
{
  "id": 13,
  "user_id": 107,
  "name": "Another Wishlist",
  "is_public": false,
  "is_default": true,
  "wished_products": [
    {
      "id": 23,
      "wishlist_id": 13,
      "variant_id": 169,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:09.947-04:00"
    },
    {
      "id": 24,
      "wishlist_id": 13,
      "variant_id": 171,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:10.077-04:00"
    },
    {
      "id": 25,
      "wishlist_id": 13,
      "variant_id": 173,
      "quantity": 1,
      "remark": null,
      "created_at": "2021-06-21T15:45:10.230-04:00"
    }
  ]
}
```



